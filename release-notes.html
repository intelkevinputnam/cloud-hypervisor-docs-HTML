<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>v21.0 &mdash; Cloud Hypervisor  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="README.html" class="icon icon-home"> Cloud Hypervisor
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="docs/api.html">Cloud Hypervisor API</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/arm64.html">How to build and test Cloud Hypervisor on AArch64</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/cpu.html">CPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/custom-image.html">How to create a custom Ubuntu image</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/debug-port.html"><code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> debug IO port</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/device_model.html">Device Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/fs.html">How to use virtio-fs</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/fuzzing.html">Fuzzing in Cloud Hypervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/gdb.html">GDB Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/hotplug.html">Cloud Hypervisor Hot Plug</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/intel_sgx.html">Intel SGX</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/intel_tdx.html">Intel TDX</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/io_throttling.html">I/O Throttling</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/iommu.html">Virtual IOMMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/live_migration.html">Live Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/macvtap-bridge.html">Using MACVTAP to Bridge onto Host Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/memory.html">Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/profiling.html">Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/seccomp.html">Seccomp filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/snapshot_restore.html">Snapshot and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/uefi.html">UEFI Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/uefi.html#links">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/vfio.html">Cloud Hypervisor VFIO HOWTO</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/vfio-user.html">Cloud Hypervisor VFIO-user HOWTO</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/vhost-user-blk-testing.html">How to test vhost-user-blk with SPDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/vhost-user-net-testing.html">How to test Vhost-user net with OpenVSwitch/DPDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/virtiofs-root.html">HOWTO VirtioFS rootfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/windows.html">Windows Support</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="README.html">Cloud Hypervisor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="README.html" class="icon icon-home"></a> &raquo;</li>
      <li>v21.0</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/release-notes.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <ul class="simple">
<li><p><a class="reference external" href="#v210">v21.0</a></p>
<ul>
<li><p><a class="reference external" href="#efficient-local-live-migration-for-live-upgrade">Efficient Local Live Migration (for Live Upgrade)</a></p></li>
<li><p><a class="reference external" href="#recommended-kernel-is-now-515">Recommended Kernel is Now 5.15</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes">Notable Bug fixes</a></p></li>
<li><p><a class="reference external" href="#contributors">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v202">v20.2</a></p></li>
<li><p><a class="reference external" href="#v201">v20.1</a></p></li>
<li><p><a class="reference external" href="#v200">v20.0</a></p>
<ul>
<li><p><a class="reference external" href="#multiple-pci-segments-support">Multiple PCI segments support</a></p></li>
<li><p><a class="reference external" href="#cpu-pinning">CPU pinning</a></p></li>
<li><p><a class="reference external" href="#improved-vfio-support">Improved VFIO support</a></p></li>
<li><p><a class="reference external" href="#safer-code">Safer code</a></p></li>
<li><p><a class="reference external" href="#extended-documentation">Extended documentation</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-1">Notable bug fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-1">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v190">v19.0</a></p>
<ul>
<li><p><a class="reference external" href="#improved-pty-handling-for-serial-and-virtio-console">Improved PTY handling for serial and <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code></a></p></li>
<li><p><a class="reference external" href="#pci-boot-time-optimisations">PCI boot time optimisations</a></p></li>
<li><p><a class="reference external" href="#improved-tdx-support">Improved TDX support</a></p></li>
<li><p><a class="reference external" href="#live-migration-enhancements">Live migration enhancements</a></p></li>
<li><p><a class="reference external" href="#virtio-mem-support-with-vfio-user"><code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code> support with <code class="docutils literal notranslate"><span class="pre">vfio-user</span></code></a></p></li>
<li><p><a class="reference external" href="#aarch64-for-virtio-iommu">AArch64 for <code class="docutils literal notranslate"><span class="pre">virtio-iommu</span></code></a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-2">Notable bug fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-2">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v180">v18.0</a></p>
<ul>
<li><p><a class="reference external" href="#experimental-user-device-vfio-user-support">Experimental User Device (<code class="docutils literal notranslate"><span class="pre">vfio-user</span></code>) support</a></p></li>
<li><p><a class="reference external" href="#migration-support-for-vhost-user-devices">Migration support for <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> devices</a></p></li>
<li><p><a class="reference external" href="#vhdx-disk-image-support">VHDX disk image support</a></p></li>
<li><p><a class="reference external" href="#device-pass-through-on-mshv-hypervisor">Device pass through on MSHV hypervisor</a></p></li>
<li><p><a class="reference external" href="#aarch64-for-support-virtio-mem">AArch64 for support <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code></a></p></li>
<li><p><a class="reference external" href="#live-migration-on-mshv-hypervisor">Live migration on MSHV hypervisor</a></p></li>
<li><p><a class="reference external" href="#aarch64-cpu-topology-support">AArch64 CPU topology support</a></p></li>
<li><p><a class="reference external" href="#power-button-support-on-aarch64">Power button support on AArch64</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-3">Notable bug fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-3">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v170">v17.0</a></p>
<ul>
<li><p><a class="reference external" href="#arm64-numa-support-using-acpi">ARM64 NUMA support using ACPI</a></p></li>
<li><p><a class="reference external" href="#seccomp-support-for-mshv-backend"><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> support for MSHV backend</a></p></li>
<li><p><a class="reference external" href="#hotplug-of-macvtap-devices">Hotplug of <code class="docutils literal notranslate"><span class="pre">macvtap</span></code> devices</a></p></li>
<li><p><a class="reference external" href="#improved-sgx-support">Improved SGX support</a></p></li>
<li><p><a class="reference external" href="#inflight-tracking-for-vhost-user-devices">Inflight tracking for <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> devices</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-4">Notable bug fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-4">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v160">v16.0</a></p>
<ul>
<li><p><a class="reference external" href="#improved-live-migration-support">Improved live migration support</a></p></li>
<li><p><a class="reference external" href="#improved-vhost-user-support">Improved <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> support</a></p></li>
<li><p><a class="reference external" href="#arm64-acpi-and-uefi-support">ARM64 ACPI and UEFI support</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-5">Notable bug fixes</a></p></li>
<li><p><a class="reference external" href="#removed-functionality">Removed functionality</a></p></li>
<li><p><a class="reference external" href="#contributors-5">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v150">v15.0</a></p>
<ul>
<li><p><a class="reference external" href="#version-numbering-and-stability-guarantees">Version numbering and stability guarantees</a></p></li>
<li><p><a class="reference external" href="#network-device-rate-limiting">Network device rate limiting</a></p></li>
<li><p><a class="reference external" href="#support-for-runtime-control-of-virtio-net-guest-offload">Support for runtime control of <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> guest offload</a></p></li>
<li><p><a class="reference external" href="#--api-socket-supports-file-descriptor-parameter"><code class="docutils literal notranslate"><span class="pre">--api-socket</span></code> supports file descriptor parameter</a></p></li>
<li><p><a class="reference external" href="#bug-fixes">Bug fixes</a></p></li>
<li><p><a class="reference external" href="#deprecations">Deprecations</a></p></li>
<li><p><a class="reference external" href="#contributors-6">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v0141">v0.14.1</a></p></li>
<li><p><a class="reference external" href="#v0140">v0.14.0</a></p>
<ul>
<li><p><a class="reference external" href="#structured-event-monitoring">Structured event monitoring</a></p></li>
<li><p><a class="reference external" href="#mshv-improvements">MSHV improvements</a></p></li>
<li><p><a class="reference external" href="#improved-aarch64-platform">Improved aarch64 platform</a></p></li>
<li><p><a class="reference external" href="#updated-hotplug-documentation">Updated hotplug documentation</a></p></li>
<li><p><a class="reference external" href="#pty-control-for-serial-and-virtio-console">PTY control for serial and <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code></a></p></li>
<li><p><a class="reference external" href="#block-device-rate-limiting">Block device rate limiting</a></p></li>
<li><p><a class="reference external" href="#deprecations-1">Deprecations</a></p></li>
<li><p><a class="reference external" href="#contributors-7">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v0130">v0.13.0</a></p>
<ul>
<li><p><a class="reference external" href="#wider-vfio-device-support">Wider VFIO device support</a></p></li>
<li><p><a class="reference external" href="#improved-huge-page-support">Improved huge page support</a></p></li>
<li><p><a class="reference external" href="#macvtap-support">MACvTAP support</a></p></li>
<li><p><a class="reference external" href="#vhd-disk-image-support">VHD disk image support</a></p></li>
<li><p><a class="reference external" href="#improved-virtio-device-threading">Improved Virtio device threading</a></p></li>
<li><p><a class="reference external" href="#clean-shutdown-support-via-synthetic-power-button">Clean shutdown support via synthetic power button</a></p></li>
<li><p><a class="reference external" href="#contributors-8">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v0120">v0.12.0</a></p>
<ul>
<li><p><a class="reference external" href="#arm64-enhancements">ARM64 enhancements</a></p></li>
<li><p><a class="reference external" href="#removal-of-vhost-user-net-and-vhost-user-block-self-spawning">Removal of <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> and <code class="docutils literal notranslate"><span class="pre">vhost-user-block</span></code> self spawning</a></p></li>
<li><p><a class="reference external" href="#migration-of-vhost-user-fs-backend">Migration of <code class="docutils literal notranslate"><span class="pre">vhost-user-fs</span></code> backend</a></p></li>
<li><p><a class="reference external" href="#enhanced-info-api">Enhanced “info” API</a></p></li>
<li><p><a class="reference external" href="#contributors-9">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v0110">v0.11.0</a></p>
<ul>
<li><p><a class="reference external" href="#io_uring-support-by-default-for-virtio-block"><code class="docutils literal notranslate"><span class="pre">io_uring</span></code> support by default for <code class="docutils literal notranslate"><span class="pre">virtio-block</span></code></a></p></li>
<li><p><a class="reference external" href="#windows-guest-support">Windows Guest Support</a></p></li>
<li><p><a class="reference external" href="#vhost-user-self-spawning-deprecation"><code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> “Self Spawning” Deprecation</a></p></li>
<li><p><a class="reference external" href="#virtio-mmio-removal"><code class="docutils literal notranslate"><span class="pre">virtio-mmio</span></code> Removal</a></p></li>
<li><p><a class="reference external" href="#snapshotrestore-support-for-arm64">Snapshot/Restore support for ARM64</a></p></li>
<li><p><a class="reference external" href="#improved-linux-boot-time">Improved Linux Boot Time</a></p></li>
<li><p><a class="reference external" href="#sigtermsigint-interrupt-signal-handling"><code class="docutils literal notranslate"><span class="pre">SIGTERM/SIGINT</span></code> Interrupt Signal Handling</a></p></li>
<li><p><a class="reference external" href="#default-log-level-changed">Default Log Level Changed</a></p></li>
<li><p><a class="reference external" href="#new---balloon-parameter-added">New <code class="docutils literal notranslate"><span class="pre">--balloon</span></code> Parameter Added</a></p></li>
<li><p><a class="reference external" href="#experimental-virtio-watchdog-support">Experimental <code class="docutils literal notranslate"><span class="pre">virtio-watchdog</span></code> Support</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-6">Notable Bug Fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-10">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v0100">v0.10.0</a></p>
<ul>
<li><p><a class="reference external" href="#virtio-block-support-for-multiple-descriptors"><code class="docutils literal notranslate"><span class="pre">virtio-block</span></code> Support for Multiple Descriptors</a></p></li>
<li><p><a class="reference external" href="#memory-zones">Memory Zones</a></p></li>
<li><p><a class="reference external" href="#seccomp-sandbox-improvements"><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> Sandbox Improvements</a></p></li>
<li><p><a class="reference external" href="#preliminary-kvm-hyperv-emulation-control">Preliminary KVM HyperV Emulation Control</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-7">Notable Bug Fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-11">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v090">v0.9.0</a></p>
<ul>
<li><p><a class="reference external" href="#io_uring-based-block-device-support"><code class="docutils literal notranslate"><span class="pre">io_uring</span></code> Based Block Device Support</a></p></li>
<li><p><a class="reference external" href="#block-and-network-device-statistics">Block and Network Device Statistics</a></p></li>
<li><p><a class="reference external" href="#http-api-responses">HTTP API Responses</a></p></li>
<li><p><a class="reference external" href="#cpu-topology">CPU Topology</a></p></li>
<li><p><a class="reference external" href="#release-build-optimization">Release Build Optimization</a></p></li>
<li><p><a class="reference external" href="#hypervisor-abstraction">Hypervisor Abstraction</a></p></li>
<li><p><a class="reference external" href="#snapshotrestore-improvements">Snapshot/Restore Improvements</a></p></li>
<li><p><a class="reference external" href="#virtio-memory-ballooning-support">Virtio Memory Ballooning Support</a></p></li>
<li><p><a class="reference external" href="#enhancements-to-arm64-support">Enhancements to ARM64 Support</a></p></li>
<li><p><a class="reference external" href="#intel-sgx-support">Intel SGX Support</a></p></li>
<li><p><a class="reference external" href="#seccomp-sandbox-improvements-1"><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> Sandbox Improvements</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-8">Notable Bug Fixes</a></p></li>
<li><p><a class="reference external" href="#contributors-12">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v080">v0.8.0</a></p>
<ul>
<li><p><a class="reference external" href="#experimental-snapshot-and-restore-support">Experimental Snapshot and Restore Support</a></p></li>
<li><p><a class="reference external" href="#experimental-arm64-support">Experimental ARM64 Support</a></p></li>
<li><p><a class="reference external" href="#support-for-using-5-level-paging-in-guests">Support for Using 5-level Paging in Guests</a></p></li>
<li><p><a class="reference external" href="#virtio-device-interrupt-suppression-for-network-devices">Virtio Device Interrupt Suppression for Network Devices</a></p></li>
<li><p><a class="reference external" href="#vhost_user_fs-improvements"><code class="docutils literal notranslate"><span class="pre">vhost_user_fs</span></code> Improvements</a></p></li>
<li><p><a class="reference external" href="#notable-bug-fixes-9">Notable Bug Fixes</a></p></li>
<li><p><a class="reference external" href="#command-line-and-api-changes">Command Line and API Changes</a></p></li>
<li><p><a class="reference external" href="#contributors-13">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v070">v0.7.0</a></p>
<ul>
<li><p><a class="reference external" href="#block-network-persistent-memory-pmem-virtiofs-and-vsock-hotplug">Block, Network, Persistent Memory (PMEM), VirtioFS and Vsock hotplug</a></p></li>
<li><p><a class="reference external" href="#alternative-libc-support">Alternative <code class="docutils literal notranslate"><span class="pre">libc</span></code> Support</a></p></li>
<li><p><a class="reference external" href="#multithreaded-multi-queued-vhost-user-backends">Multithreaded Multi Queued <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> Backends</a></p></li>
<li><p><a class="reference external" href="#initial-ramfs-support">Initial RamFS Support</a></p></li>
<li><p><a class="reference external" href="#alternative-memory-hotplug-virtio-mem">Alternative Memory Hotplug: <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code></a></p></li>
<li><p><a class="reference external" href="#seccomp-sandboxing"><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> Sandboxing</a></p></li>
<li><p><a class="reference external" href="#updated-distribution-support">Updated Distribution Support</a></p></li>
<li><p><a class="reference external" href="#command-line-and-api-changes-1">Command Line and API Changes</a></p></li>
<li><p><a class="reference external" href="#contributors-14">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v060">v0.6.0</a></p>
<ul>
<li><p><a class="reference external" href="#directly-assigned-devices-hotplug">Directly Assigned Devices Hotplug</a></p></li>
<li><p><a class="reference external" href="#shared-filesystem-improvements">Shared Filesystem Improvements</a></p></li>
<li><p><a class="reference external" href="#block-and-networking-io-self-offloading">Block and Networking IO Self Offloading</a></p></li>
<li><p><a class="reference external" href="#command-line-interface">Command Line Interface</a></p></li>
<li><p><a class="reference external" href="#pvh-boot">PVH Boot</a></p></li>
<li><p><a class="reference external" href="#contributors-15">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v051">v0.5.1</a></p></li>
<li><p><a class="reference external" href="#v050">v0.5.0</a></p>
<ul>
<li><p><a class="reference external" href="#virtual-machine-dynamic-resizing">Virtual Machine Dynamic Resizing</a></p></li>
<li><p><a class="reference external" href="#multi-queue-multi-threaded-paravirtualization">Multi-Queue, Multi-Threaded Paravirtualization</a></p></li>
<li><p><a class="reference external" href="#new-interrupt-management-framework">New Interrupt Management Framework</a></p></li>
<li><p><a class="reference external" href="#development-tools">Development Tools</a></p></li>
<li><p><a class="reference external" href="#kata-containers-integration">Kata Containers Integration</a></p></li>
<li><p><a class="reference external" href="#contributors-16">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v040">v0.4.0</a></p>
<ul>
<li><p><a class="reference external" href="#dynamic-virtual-cpus-addition">Dynamic virtual CPUs addition</a></p></li>
<li><p><a class="reference external" href="#programmatic-firmware-tables-generation">Programmatic firmware tables generation</a></p></li>
<li><p><a class="reference external" href="#filesystem-and-block-devices-vhost-user-backends">Filesystem and block devices vhost-user backends</a></p></li>
<li><p><a class="reference external" href="#guest-pause-and-resume">Guest pause and resume</a></p></li>
<li><p><a class="reference external" href="#userspace-ioapic-by-default">Userspace IOAPIC by default</a></p></li>
<li><p><a class="reference external" href="#pci-bar-reprogramming">PCI BAR reprogramming</a></p></li>
<li><p><a class="reference external" href="#new-cloud-hypervisor-organization">New <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> organization</a></p></li>
<li><p><a class="reference external" href="#contributors-17">Contributors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v030">v0.3.0</a></p>
<ul>
<li><p><a class="reference external" href="#block-device-offloading">Block device offloading</a></p></li>
<li><p><a class="reference external" href="#network-device-backend">Network device backend</a></p></li>
<li><p><a class="reference external" href="#virtual-sockets">Virtual sockets</a></p></li>
<li><p><a class="reference external" href="#http-based-api">HTTP based API</a></p></li>
<li><p><a class="reference external" href="#memory-mapped-virtio-transport">Memory mapped virtio transport</a></p></li>
<li><p><a class="reference external" href="#paravirtualized-iommu">Paravirtualized IOMMU</a></p></li>
<li><p><a class="reference external" href="#ubuntu-1910">Ubuntu 19.10</a></p></li>
<li><p><a class="reference external" href="#large-memory-guests">Large memory guests</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v020">v0.2.0</a></p>
<ul>
<li><p><a class="reference external" href="#network-device-offloading">Network device offloading</a></p></li>
<li><p><a class="reference external" href="#minimal-hardware-reduced-acpi">Minimal hardware-reduced ACPI</a></p></li>
<li><p><a class="reference external" href="#debug-io-port">Debug I/O port</a></p></li>
<li><p><a class="reference external" href="#improved-direct-device-assignment">Improved direct device assignment</a></p></li>
<li><p><a class="reference external" href="#improved-shared-filesystem">Improved shared filesystem</a></p></li>
<li><p><a class="reference external" href="#ubuntu-bionic-based-ci">Ubuntu bionic based CI</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#v010">v0.1.0</a></p>
<ul>
<li><p><a class="reference external" href="#shared-filesystem">Shared filesystem</a></p></li>
<li><p><a class="reference external" href="#initial-direct-device-assignment-support">Initial direct device assignment support</a></p></li>
<li><p><a class="reference external" href="#userspace-ioapic">Userspace IOAPIC</a></p></li>
<li><p><a class="reference external" href="#virtual-persistent-memory">Virtual persistent memory</a></p></li>
<li><p><a class="reference external" href="#linux-kernel-bzimage">Linux kernel bzImage</a></p></li>
<li><p><a class="reference external" href="#console-over-virtio">Console over virtio</a></p></li>
<li><p><a class="reference external" href="#unit-testing">Unit testing</a></p></li>
<li><p><a class="reference external" href="#integration-tests-parallelization">Integration tests parallelization</a></p></li>
</ul>
</li>
</ul>
<section class="tex2jax_ignore mathjax_ignore" id="v21-0">
<h1>v21.0<a class="headerlink" href="#v21-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/24">v21.0
project</a>.</p>
<section id="efficient-local-live-migration-for-live-upgrade">
<h2>Efficient Local Live Migration (for Live Upgrade)<a class="headerlink" href="#efficient-local-live-migration-for-live-upgrade" title="Permalink to this headline"></a></h2>
<p>In order to support fast live upgrade of the VMM an optimised path has been added in which the memory for the VM is not compared from source to destination. This is activated by passing <code class="docutils literal notranslate"><span class="pre">--local</span></code> to the <code class="docutils literal notranslate"><span class="pre">ch-remote</span> <span class="pre">send-migration</span></code> command. This means that the live upgrade can complete in the order of 50ms vs 3s. (#3566)</p>
</section>
<section id="recommended-kernel-is-now-5-15">
<h2>Recommended Kernel is Now 5.15<a class="headerlink" href="#recommended-kernel-is-now-5-15" title="Permalink to this headline"></a></h2>
<p>Due to an issue in the <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> code in 5.14 the recommended Linux kernel is now 5.15. (#3530)</p>
</section>
<section id="notable-bug-fixes">
<h2>Notable Bug fixes<a class="headerlink" href="#notable-bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Multiple fixes were made to the OpenAPI YAML file to match the implementaion (#3555,#3562)</p></li>
<li><p>Avoid live migration deadlock when triggered during the kernel boot (#3585)</p></li>
<li><p>Support live migration within firmware (#3586)</p></li>
<li><p>Validate the <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> desciptor chain (#3548)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direct=on</span></code> (<code class="docutils literal notranslate"><span class="pre">O_DIRECT</span></code>) can now be used with a guest that makes unaligned accesses (e.g. firmware) (#3587)</p></li>
</ul>
</section>
<section id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release:</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Barret Rhoden <a class="reference external" href="mailto:brho&#37;&#52;&#48;google&#46;com">mailto:brho<span>&#64;</span>google<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Fabiano Fidêncio <a class="reference external" href="mailto:fabiano&#46;fidencio&#37;&#52;&#48;intel&#46;com">mailto:fabiano<span>&#46;</span>fidencio<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Liang Zhou <a class="reference external" href="mailto:zhoul110&#37;&#52;&#48;chinatelecom&#46;cn">mailto:zhoul110<span>&#64;</span>chinatelecom<span>&#46;</span>cn</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muhammad Falak R Wani <a class="reference external" href="mailto:falakreyaz&#37;&#52;&#48;gmail&#46;com">mailto:falakreyaz<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Ziye Yang <a class="reference external" href="mailto:ziye&#46;yang&#37;&#52;&#48;intel&#46;com">mailto:ziye<span>&#46;</span>yang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v20-2">
<h1>v20.2<a class="headerlink" href="#v20-2" title="Permalink to this headline"></a></h1>
<p>This is a bug fix release. The following issues have been addressed:</p>
<ul class="simple">
<li><p>Don’t error out when setting up the SIGWINCH handler (for console resize)
when this fails due to older kernel (#3456)</p></li>
<li><p>Seccomp rules were refined to remove syscalls that are now unused</p></li>
<li><p>Fix reboot on older host kernels when SIGWINCH handler was not initialised
(#3496)</p></li>
<li><p>Fix virtio-vsock blocking issue (#3497)</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v20-1">
<h1>v20.1<a class="headerlink" href="#v20-1" title="Permalink to this headline"></a></h1>
<p>This is a bug fix release. The following issues have been addressed:</p>
<ul class="simple">
<li><p>Networking performance regression with <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> (#3450)</p></li>
<li><p>Limit file descriptors sent in <code class="docutils literal notranslate"><span class="pre">vfio-user</span></code> support (#3401)</p></li>
<li><p>Fully advertise PCI MMIO config regions in ACPI tables (#3432)</p></li>
<li><p>Set the TSS and KVM identity maps so they don’t overlap with firmware RAM</p></li>
<li><p>Correctly update the <code class="docutils literal notranslate"><span class="pre">DeviceTree</span></code> on restore</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v20-0">
<h1>v20.0<a class="headerlink" href="#v20-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/23">v20.0
project</a>.</p>
<section id="multiple-pci-segments-support">
<h2>Multiple PCI segments support<a class="headerlink" href="#multiple-pci-segments-support" title="Permalink to this headline"></a></h2>
<p>Cloud Hypervisor is no longer limited to 31 PCI devices. For both <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> and
<code class="docutils literal notranslate"><span class="pre">aarch64</span></code> architectures, it is now possible to create up to 16 PCI segments,
increasing the total amount of supported PCI devices to 496.</p>
</section>
<section id="cpu-pinning">
<h2>CPU pinning<a class="headerlink" href="#cpu-pinning" title="Permalink to this headline"></a></h2>
<p>For each vCPU, the user can define a limited set of host CPUs on which it is
allowed to run. This can be useful when assigning a 1:1 mapping between host and
guest resources, or when running a VM on a specific NUMA node.</p>
</section>
<section id="improved-vfio-support">
<h2>Improved VFIO support<a class="headerlink" href="#improved-vfio-support" title="Permalink to this headline"></a></h2>
<p>Based on VFIO region capabilities, all regions can be memory mapped, limiting
the amount of triggered VM exits, and therefore increasing the performance of
the passthrough device.</p>
</section>
<section id="safer-code">
<h2>Safer code<a class="headerlink" href="#safer-code" title="Permalink to this headline"></a></h2>
<p>Several sections containing unsafe Rust code have been replaced with safe
alternatives, and multiple comments have been added to clarify why the remaining
unsafe sections are safe to use.</p>
</section>
<section id="extended-documentation">
<h2>Extended documentation<a class="headerlink" href="#extended-documentation" title="Permalink to this headline"></a></h2>
<p>The documentation related to VFIO has been updated while some new documents have
been introduced to cover the usage of <code class="docutils literal notranslate"><span class="pre">--cpus</span></code> parameter as well as how to run
Cloud Hypervisor on Intel TDX.</p>
</section>
<section id="id1">
<h2>Notable bug fixes<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Naturally align PCI BARs on relocation (#3244)</p></li>
<li><p>Fix panic in SIGWINCH listener thread when no seccomp filter set (#3338)</p></li>
<li><p>Use the tty raw mode implementation from libc (#3344)</p></li>
<li><p>Fix the emulation of register D for CMOS/RTC device (#3393)</p></li>
</ul>
</section>
<section id="id2">
<h2>Contributors<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release:</p>
<ul class="simple">
<li><p>Alyssa Ross <a class="reference external" href="mailto:hi&#37;&#52;&#48;alyssa&#46;is">mailto:hi<span>&#64;</span>alyssa<span>&#46;</span>is</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Fabiano Fidêncio <a class="reference external" href="mailto:fabiano&#46;fidencio&#37;&#52;&#48;intel&#46;com">mailto:fabiano<span>&#46;</span>fidencio<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Willen Yang <a class="reference external" href="mailto:willenyang&#37;&#52;&#48;gmail&#46;com">mailto:willenyang<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>William Douglas <a class="reference external" href="mailto:william&#46;douglas&#37;&#52;&#48;intel&#46;com">mailto:william<span>&#46;</span>douglas<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Ziye Yang <a class="reference external" href="mailto:ziye&#46;yang&#37;&#52;&#48;intel&#46;com">mailto:ziye<span>&#46;</span>yang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v19-0">
<h1>v19.0<a class="headerlink" href="#v19-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/22">v19.0
project</a>.</p>
<section id="improved-pty-handling-for-serial-and-virtio-console">
<h2>Improved PTY handling for serial and <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code><a class="headerlink" href="#improved-pty-handling-for-serial-and-virtio-console" title="Permalink to this headline"></a></h2>
<p>The PTY support for serial has been enhanced with improved buffering when the
the PTY is not yet connected to. Using <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code> with PTY now results in
the console being resized if the PTY window is also resized.</p>
</section>
<section id="pci-boot-time-optimisations">
<h2>PCI boot time optimisations<a class="headerlink" href="#pci-boot-time-optimisations" title="Permalink to this headline"></a></h2>
<p>Multiple optimisations have been made to the PCI handling resulting in
significant improvements in the boot time of the guest.</p>
</section>
<section id="improved-tdx-support">
<h2>Improved TDX support<a class="headerlink" href="#improved-tdx-support" title="Permalink to this headline"></a></h2>
<p>When using the latest TDVF firmware the ACPI tables created by the VMM are now
exposed via the firmware to the guest.</p>
</section>
<section id="live-migration-enhancements">
<h2>Live migration enhancements<a class="headerlink" href="#live-migration-enhancements" title="Permalink to this headline"></a></h2>
<p>Live migration support has been enhanced to support migration with <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code>
based memory hotplug and the <code class="docutils literal notranslate"><span class="pre">virtio-balloon</span></code> device now supports live
migration.</p>
</section>
<section id="virtio-mem-support-with-vfio-user">
<h2><code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code> support with <code class="docutils literal notranslate"><span class="pre">vfio-user</span></code><a class="headerlink" href="#virtio-mem-support-with-vfio-user" title="Permalink to this headline"></a></h2>
<p>The use of <code class="docutils literal notranslate"><span class="pre">vfio-user</span></code> userspaces devices can now be used in conjunction with
<code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code> based memory hotplug and unplug.</p>
</section>
<section id="aarch64-for-virtio-iommu">
<h2>AArch64 for <code class="docutils literal notranslate"><span class="pre">virtio-iommu</span></code><a class="headerlink" href="#aarch64-for-virtio-iommu" title="Permalink to this headline"></a></h2>
<p>A paravirtualised IOMMU can now be used on the AArch64 platform.</p>
</section>
<section id="id3">
<h2>Notable bug fixes<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>ACPI hotplugged memory is correctly restored after a live migration or
snapshot/restore (#3165)</p></li>
<li><p>Multiple devices from the same IOMMU group can be passed through via VFIO
(#3078 #3113)</p></li>
<li><p>Live migration with large blocks of memory was buggy due to an in issue in
the underlying crate (#3157)</p></li>
</ul>
</section>
<section id="id4">
<h2>Contributors<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release:</p>
<ul class="simple">
<li><p>Alyssa Ross <a class="reference external" href="mailto:hi&#37;&#52;&#48;alyssa&#46;is">mailto:hi<span>&#64;</span>alyssa<span>&#46;</span>is</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Hui Zhu <a class="reference external" href="mailto:teawater&#37;&#52;&#48;antfin&#46;com">mailto:teawater<span>&#64;</span>antfin<span>&#46;</span>com</a></p></li>
<li><p>Jianyong Wu <a class="reference external" href="mailto:jianyong&#46;wu&#37;&#52;&#48;arm&#46;com">mailto:jianyong<span>&#46;</span>wu<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Li Yu <a class="reference external" href="mailto:liyu&#46;yukiteru&#37;&#52;&#48;bytedance&#46;com">mailto:liyu<span>&#46;</span>yukiteru<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>William Douglas <a class="reference external" href="mailto:william&#46;douglas&#37;&#52;&#48;intel&#46;com">mailto:william<span>&#46;</span>douglas<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Yu Li <a class="reference external" href="mailto:liyu&#46;yukiteru&#37;&#52;&#48;bytedance&#46;com">mailto:liyu<span>&#46;</span>yukiteru<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v18-0">
<h1>v18.0<a class="headerlink" href="#v18-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/21">v18.0
project</a>.</p>
<section id="experimental-user-device-vfio-user-support">
<h2>Experimental User Device (<code class="docutils literal notranslate"><span class="pre">vfio-user</span></code>) support<a class="headerlink" href="#experimental-user-device-vfio-user-support" title="Permalink to this headline"></a></h2>
<p>Experimental support for running PCI devices in userspace via <code class="docutils literal notranslate"><span class="pre">vfio-user</span></code>
has been included. This allows the use of the SPDK NVMe <code class="docutils literal notranslate"><span class="pre">vfio-user</span></code> controller
with Cloud Hypervisor. This is enabled by <code class="docutils literal notranslate"><span class="pre">--user-device</span></code> on the command line.</p>
</section>
<section id="migration-support-for-vhost-user-devices">
<h2>Migration support for <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> devices<a class="headerlink" href="#migration-support-for-vhost-user-devices" title="Permalink to this headline"></a></h2>
<p>Devices exposed into the VM via <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> can now be migrated using the live
migration support. This requires support from the backend however the commonly
used DPDK <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> backend does support this.</p>
</section>
<section id="vhdx-disk-image-support">
<h2>VHDX disk image support<a class="headerlink" href="#vhdx-disk-image-support" title="Permalink to this headline"></a></h2>
<p>Images using the VHDX disk image format can now be used with Cloud Hypervisor.</p>
</section>
<section id="device-pass-through-on-mshv-hypervisor">
<h2>Device pass through on MSHV hypervisor<a class="headerlink" href="#device-pass-through-on-mshv-hypervisor" title="Permalink to this headline"></a></h2>
<p>When running on the MSHV hypervisor it is possible to pass through devices from
the host through to the guest (e.g with <code class="docutils literal notranslate"><span class="pre">--device</span></code>)</p>
</section>
<section id="aarch64-for-support-virtio-mem">
<h2>AArch64 for support <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code><a class="headerlink" href="#aarch64-for-support-virtio-mem" title="Permalink to this headline"></a></h2>
<p>The reference Linux kernel we recommend for using with Cloud Hypervisor now supports <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code> on AArch64.</p>
</section>
<section id="live-migration-on-mshv-hypervisor">
<h2>Live migration on MSHV hypervisor<a class="headerlink" href="#live-migration-on-mshv-hypervisor" title="Permalink to this headline"></a></h2>
<p>Live migration is now supported when running on the MSHV hypervisor including
efficient tracking of dirty pages.</p>
</section>
<section id="aarch64-cpu-topology-support">
<h2>AArch64 CPU topology support<a class="headerlink" href="#aarch64-cpu-topology-support" title="Permalink to this headline"></a></h2>
<p>The CPU topology (as configured through <code class="docutils literal notranslate"><span class="pre">--cpu</span> <span class="pre">topology=</span></code>) can now be
configured on AArch64 platforms and is conveyed through either ACPI or device
tree.</p>
</section>
<section id="power-button-support-on-aarch64">
<h2>Power button support on AArch64<a class="headerlink" href="#power-button-support-on-aarch64" title="Permalink to this headline"></a></h2>
<p>Use of the ACPI power button (e.g <code class="docutils literal notranslate"><span class="pre">ch-remote</span> <span class="pre">--api-socket=&lt;API</span> <span class="pre">socket&gt;</span> <span class="pre">power-button</span></code>)
is now supported when running on AArch64.</p>
</section>
<section id="id5">
<h2>Notable bug fixes<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Using two PTY outputs e.g. <code class="docutils literal notranslate"><span class="pre">--serial</span> <span class="pre">pty</span> <span class="pre">--console</span> <span class="pre">pty</span></code> now works correctly (#3012)</p></li>
<li><p>TTY input is now always sent to the correct destination (#3005)</p></li>
<li><p>The boot is no longer blocked when using a unattached PTY on the serial console (#3004)</p></li>
<li><p>Live migration is now supported on AArch64 (#3049)</p></li>
<li><p>Ensure signal handlers are run on the correct thread (#3069)</p></li>
</ul>
</section>
<section id="id6">
<h2>Contributors<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release:</p>
<ul class="simple">
<li><p>Alyssa Ross <a class="reference external" href="mailto:hi&#37;&#52;&#48;alyssa&#46;is">mailto:hi<span>&#64;</span>alyssa<span>&#46;</span>is</a></p></li>
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Arafatms <a class="reference external" href="mailto:arafatms&#37;&#52;&#48;outlook&#46;com">mailto:arafatms<span>&#64;</span>outlook<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Fazla Mehrab <a class="reference external" href="mailto:akm&#46;fazla&#46;mehrab&#37;&#52;&#48;vt&#46;edu">mailto:akm<span>&#46;</span>fazla<span>&#46;</span>mehrab<span>&#64;</span>vt<span>&#46;</span>edu</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Jianyong Wu <a class="reference external" href="mailto:jianyong&#46;wu&#37;&#52;&#48;arm&#46;com">mailto:jianyong<span>&#46;</span>wu<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Jiaqi Gao <a class="reference external" href="mailto:jiaqi&#46;gao&#37;&#52;&#48;intel&#46;com">mailto:jiaqi<span>&#46;</span>gao<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Markus Theil <a class="reference external" href="mailto:markus&#46;theil&#37;&#52;&#48;tu-ilmenau&#46;de">mailto:markus<span>&#46;</span>theil<span>&#64;</span>tu-ilmenau<span>&#46;</span>de</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Yu Li <a class="reference external" href="mailto:liyu&#46;yukiteru&#37;&#52;&#48;bytedance&#46;com">mailto:liyu<span>&#46;</span>yukiteru<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v17-0">
<h1>v17.0<a class="headerlink" href="#v17-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/20">v17.0
project</a>.</p>
<section id="arm64-numa-support-using-acpi">
<h2>ARM64 NUMA support using ACPI<a class="headerlink" href="#arm64-numa-support-using-acpi" title="Permalink to this headline"></a></h2>
<p>The support for ACPI on ARM64 has been enhanced to include support for
specifying a NUMA configuration using the existing control options.</p>
</section>
<section id="seccomp-support-for-mshv-backend">
<h2><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> support for MSHV backend<a class="headerlink" href="#seccomp-support-for-mshv-backend" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">seccomp</span></code> rules have now been extended to support running against the MSHV
hypervisor backend.</p>
</section>
<section id="hotplug-of-macvtap-devices">
<h2>Hotplug of <code class="docutils literal notranslate"><span class="pre">macvtap</span></code> devices<a class="headerlink" href="#hotplug-of-macvtap-devices" title="Permalink to this headline"></a></h2>
<p>Hotplug of <code class="docutils literal notranslate"><span class="pre">macvtap</span></code> devices is now supported with the file descriptor for the
network device if opened by the user and passed to the VMM. The <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code>
tool supports this functionality when adding a network device.</p>
</section>
<section id="improved-sgx-support">
<h2>Improved SGX support<a class="headerlink" href="#improved-sgx-support" title="Permalink to this headline"></a></h2>
<p>The SGX support has been updated to match the latest Linux kernel support and
now supports SGX provisioning and associating EPC sections to NUMA nodes.</p>
</section>
<section id="inflight-tracking-for-vhost-user-devices">
<h2>Inflight tracking for <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> devices<a class="headerlink" href="#inflight-tracking-for-vhost-user-devices" title="Permalink to this headline"></a></h2>
<p>Support for handling inflight tracking of I/O requests has been added to the
<code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> devices allowing recovery after device reconnection.</p>
</section>
<section id="id7">
<h2>Notable bug fixes<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>VFIO PCI BAR calculation code now correctly handles I/O BARs (#2821).</p></li>
<li><p>The VMM side of <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> devices no longer advertise the
<code class="docutils literal notranslate"><span class="pre">VIRTIO_F_RING_PACKED</span></code> feature as they are not yet supported in the VMM
(#2833).</p></li>
<li><p>On ARM64 VMs can be created with more than 16 vCPUs (#2763).</p></li>
</ul>
</section>
<section id="id8">
<h2>Contributors<a class="headerlink" href="#id8" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release:</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Arafatms <a class="reference external" href="mailto:arafatms&#37;&#52;&#48;outlook&#46;com">mailto:arafatms<span>&#64;</span>outlook<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Fei Li <a class="reference external" href="mailto:lifei&#46;shirley&#37;&#52;&#48;bytedance&#46;com">mailto:lifei<span>&#46;</span>shirley<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Jiachen Zhang <a class="reference external" href="mailto:zhangjiachen&#46;jaycee&#37;&#52;&#48;bytedance&#46;com">mailto:zhangjiachen<span>&#46;</span>jaycee<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
<li><p>Jianyong Wu <a class="reference external" href="mailto:jianyong&#46;wu&#37;&#52;&#48;arm&#46;com">mailto:jianyong<span>&#46;</span>wu<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Li Hangjing <a class="reference external" href="mailto:lihangjing&#37;&#52;&#48;bytedance&#46;com">mailto:lihangjing<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Yukiteru <a class="reference external" href="mailto:wfly1998&#37;&#52;&#48;sina&#46;com">mailto:wfly1998<span>&#64;</span>sina<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v16-0">
<h1>v16.0<a class="headerlink" href="#v16-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/19">v16.0 project</a>.</p>
<section id="improved-live-migration-support">
<h2>Improved live migration support<a class="headerlink" href="#improved-live-migration-support" title="Permalink to this headline"></a></h2>
<p>The live migration support inside Cloud Hypervisor has been improved with the addition of the tracking of dirty pages written by the VMM to complement the tracking of dirty pages made by the guest itself. Further the internal state of the VMM now is versioned which allows the safe migration of VMs from one version of the VMM to a newer one. However further testing is required so this should be done with care. See the <a class="reference internal" href="docs/live_migration.html"><span class="doc std std-doc">live migration documentation</span></a> for more details.</p>
</section>
<section id="improved-vhost-user-support">
<h2>Improved <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> support<a class="headerlink" href="#improved-vhost-user-support" title="Permalink to this headline"></a></h2>
<p>When using <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> to access devices implemented in different processes there is now support for reconnection of those devices in the case of a restart of the backend. In addition it is now possible to operate with the direction of the <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> connection reversed with the server in the VMM and the client in the backend. This is aligns with the default approach recommended by Open vSwitch.</p>
</section>
<section id="arm64-acpi-and-uefi-support">
<h2>ARM64 ACPI and UEFI support<a class="headerlink" href="#arm64-acpi-and-uefi-support" title="Permalink to this headline"></a></h2>
<p>Cloud Hypervisor now supports using ACPI and booting from a UEFI image on ARM64. This allows the use of stock OS images without direct kernel boot.</p>
</section>
<section id="id9">
<h2>Notable bug fixes<a class="headerlink" href="#id9" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Activating fewer <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> queues than advertised is now supported. This appeared when using OVMF with an MQ enabled device (#2578).</p></li>
<li><p>When using MQ with <code class="docutils literal notranslate"><span class="pre">virtio</span></code> devices Cloud Hypervisor now enforces a minimum vCPU count which ensures that the user will not see adverse guest performance (#2563).</p></li>
<li><p>The KVM clock is now correctly handled during live migration / snapshot &amp; restore.</p></li>
</ul>
</section>
<section id="removed-functionality">
<h2>Removed functionality<a class="headerlink" href="#removed-functionality" title="Permalink to this headline"></a></h2>
<p>The following formerly deprecated features have been removed:</p>
<ul class="simple">
<li><p>Support for booting with the “LinuxBoot” protocol for ELF and <code class="docutils literal notranslate"><span class="pre">bzImage</span></code>
binaries has been deprecated. When using direct boot users should configure
their kernel with <code class="docutils literal notranslate"><span class="pre">CONFIG_PVH=y</span></code>.</p></li>
</ul>
</section>
<section id="id10">
<h2>Contributors<a class="headerlink" href="#id10" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release including some new faces.</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Dayu Liu <a class="reference external" href="mailto:liu&#46;dayu&#37;&#52;&#48;zte&#46;com&#46;cn">mailto:liu<span>&#46;</span>dayu<span>&#64;</span>zte<span>&#46;</span>com<span>&#46;</span>cn</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Jiachen Zhang <a class="reference external" href="mailto:zhangjiachen&#46;jaycee&#37;&#52;&#48;bytedance&#46;com">mailto:zhangjiachen<span>&#46;</span>jaycee<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
<li><p>Jianyong Wu <a class="reference external" href="mailto:jianyong&#46;wu&#37;&#52;&#48;arm&#46;com">mailto:jianyong<span>&#46;</span>wu<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Mikko Ylinen <a class="reference external" href="mailto:mikko&#46;ylinen&#37;&#52;&#48;intel&#46;com">mailto:mikko<span>&#46;</span>ylinen<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Ren Lei <a class="reference external" href="mailto:ren&#46;lei4&#37;&#52;&#48;zte&#46;com&#46;cn">mailto:ren<span>&#46;</span>lei4<span>&#64;</span>zte<span>&#46;</span>com<span>&#46;</span>cn</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Yi Wang <a class="reference external" href="mailto:wang&#46;yi59&#37;&#52;&#48;zte&#46;com&#46;cn">mailto:wang<span>&#46;</span>yi59<span>&#64;</span>zte<span>&#46;</span>com<span>&#46;</span>cn</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v15-0">
<h1>v15.0<a class="headerlink" href="#v15-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/18">v15.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version v15.0 include:</p>
<section id="version-numbering-and-stability-guarantees">
<h2>Version numbering and stability guarantees<a class="headerlink" href="#version-numbering-and-stability-guarantees" title="Permalink to this headline"></a></h2>
<p>This release is the first in a new version numbering scheme to represent that
we believe Cloud Hypervisor is maturing and entering a period of stability.
With this new release we are beginning our new stability guarantees:</p>
<ul class="simple">
<li><p>The API (including command line options) will not be removed or changed in a
breaking way without a minimum of 2 releases notice. Where possible warnings
will be given about the use of deprecated functionality and the deprecations
will be documented in the release notes.</p></li>
<li><p>Point releases will be made between individual releases where there are
substantial bug fixes or security issues that need to be fixed.</p></li>
</ul>
<p>Currently the following items are <strong>not</strong> guaranteed across updates:</p>
<ul class="simple">
<li><p>Snapshot/restore is not supported across different versions</p></li>
<li><p>Live migration is not supported across different versions</p></li>
<li><p>The following features are considered experimental and may change
substantially between releases: TDX, SGX.</p></li>
</ul>
</section>
<section id="network-device-rate-limiting">
<h2>Network device rate limiting<a class="headerlink" href="#network-device-rate-limiting" title="Permalink to this headline"></a></h2>
<p>Building on our existing support for rate limiting block activity the network
device also now supports rate limiting. Full details of the controls are in the
<a class="reference internal" href="docs/io_throttling.html"><span class="doc std std-doc">IO throttling documentation.</span></a></p>
</section>
<section id="support-for-runtime-control-of-virtio-net-guest-offload">
<h2>Support for runtime control of <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> guest offload<a class="headerlink" href="#support-for-runtime-control-of-virtio-net-guest-offload" title="Permalink to this headline"></a></h2>
<p>The guest is now able to change the offload settings for the <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code>
device. As well as providing a useful control this mitigates an issue in the
Linux kernel where the guest will attempt to reprogram the offload settings
even if they are not advertised as configurable (#2528).</p>
</section>
<section id="api-socket-supports-file-descriptor-parameter">
<h2><code class="docutils literal notranslate"><span class="pre">--api-socket</span></code> supports file descriptor parameter<a class="headerlink" href="#api-socket-supports-file-descriptor-parameter" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">--api-socket</span></code> can now take an <code class="docutils literal notranslate"><span class="pre">fd=</span></code> parameter to specify an existing file
descriptor to use. This is particularly beneficial for frameworks that need to
programmatically control Cloud Hypervisor.</p>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>A workaround has been put in place to mitigate a Linux kernel issues that
results in the CPU thread spinning at 100% when using <code class="docutils literal notranslate"><span class="pre">virtio-pmem</span></code> (#2277).</p></li>
<li><p>PCI BARs are now correctly aligned removing the need for the guest to
reprogram them (#1797,#1798)</p></li>
<li><p>Handle TAP interface not being writable within virtio-net (due to the buffer
exhaustion on the host) (#2517)</p></li>
<li><p>The recommended Linux kernel is now v5.12.0 as it contains a fix that
prevents snapshot &amp; restore working (#2535)</p></li>
</ul>
</section>
<section id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline"></a></h2>
<p>Deprecated features will be removed in a subsequent release and users should plan to use alternatives</p>
<ul class="simple">
<li><p>Support for booting with the “LinuxBoot” protocol for ELF and <code class="docutils literal notranslate"><span class="pre">bzImage</span></code>
binaries has been deprecated. When using direct boot users should configure
their kernel with <code class="docutils literal notranslate"><span class="pre">CONFIG_PVH=y</span></code>. Will be removed in v16.0.</p></li>
</ul>
</section>
<section id="id11">
<h2>Contributors<a class="headerlink" href="#id11" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our release including some new faces.</p>
<ul class="simple">
<li><p>Alyssa Ross <a class="reference external" href="mailto:hi&#37;&#52;&#48;alyssa&#46;is">mailto:hi<span>&#64;</span>alyssa<span>&#46;</span>is</a></p></li>
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Gaelan Steele <a class="reference external" href="mailto:gbs&#37;&#52;&#48;canishe&#46;com">mailto:gbs<span>&#64;</span>canishe<span>&#46;</span>com</a></p></li>
<li><p>Jianyong Wu <a class="reference external" href="mailto:jianyong&#46;wu&#37;&#52;&#48;arm&#46;com">mailto:jianyong<span>&#46;</span>wu<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>William Douglas <a class="reference external" href="mailto:william&#46;douglas&#37;&#52;&#48;intel&#46;com">mailto:william<span>&#46;</span>douglas<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-14-1">
<h1>v0.14.1<a class="headerlink" href="#v0-14-1" title="Permalink to this headline"></a></h1>
<p>Bug fix release branched off the v0.14.0 release. The following bugs were fixed
in this release:</p>
<ul class="simple">
<li><p>CPU hotplug on Windows failed due to misreported CPU state information and
the lack of HyperV CPUID bit enabled (#2437, #2449, #2436)</p></li>
<li><p>A seccomp rule was missing that was triggered on CPU unplug (#2455)</p></li>
<li><p>A bounds check in VIRTIO queue validation was erroneously generating
DescriptorChainTooShort errors in certain circumstances (#2450, #2424)</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-14-0">
<h1>v0.14.0<a class="headerlink" href="#v0-14-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/17">0.14.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.14.0 include:</p>
<section id="structured-event-monitoring">
<h2>Structured event monitoring<a class="headerlink" href="#structured-event-monitoring" title="Permalink to this headline"></a></h2>
<p>A new option was added to the VMM <code class="docutils literal notranslate"><span class="pre">--event-monitor</span></code> which reports structured
events (JSON) over a file or file descriptor at key events in the lifecycle of
the VM. The list of events is limited at the moment but will be further
extended over subsequent releases. The events exposed form part of the Cloud
Hypervisor API surface.</p>
</section>
<section id="mshv-improvements">
<h2>MSHV improvements<a class="headerlink" href="#mshv-improvements" title="Permalink to this headline"></a></h2>
<p>Basic support has been added for running Windows guests atop the MSHV
hypervisor as an alternative to KVM and further improvements have been made to
the MSHV support.</p>
</section>
<section id="improved-aarch64-platform">
<h2>Improved aarch64 platform<a class="headerlink" href="#improved-aarch64-platform" title="Permalink to this headline"></a></h2>
<p>The aarch64 platform has been enhanced with more devices exposed to the running
VM including an enhanced serial UART.</p>
</section>
<section id="updated-hotplug-documentation">
<h2>Updated hotplug documentation<a class="headerlink" href="#updated-hotplug-documentation" title="Permalink to this headline"></a></h2>
<p>The documentation for the hotplug support has been updated to reflect the use
of the <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code> tool and to include details of <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code> based hotplug as
well as documenting hotplug of paravirtualised and VFIO devices.</p>
</section>
<section id="pty-control-for-serial-and-virtio-console">
<h2>PTY control for serial and <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code><a class="headerlink" href="#pty-control-for-serial-and-virtio-console" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">--serial</span></code> and <code class="docutils literal notranslate"><span class="pre">--console</span></code> parameters can now direct the console to a PTY
allowing programmatic control of the console from another process through the
PTY subsystem.</p>
</section>
<section id="block-device-rate-limiting">
<h2>Block device rate limiting<a class="headerlink" href="#block-device-rate-limiting" title="Permalink to this headline"></a></h2>
<p>The block device performance can now be constrained as part of the VM
configuration allowing rate limiting. Full details of the controls are in the
<a class="reference internal" href="docs/io_throttling.html"><span class="doc std std-doc">IO throttling documentation.</span></a></p>
</section>
<section id="id12">
<h2>Deprecations<a class="headerlink" href="#id12" title="Permalink to this headline"></a></h2>
<p>Deprecated features will be removed in a subsequent release and users should plan to use alternatives</p>
<ul class="simple">
<li><p>Support for booting with the “LinuxBoot” protocol for ELF and <code class="docutils literal notranslate"><span class="pre">bzImage</span></code>
binaries has been deprecated. When using direct boot users should configure
their kernel with <code class="docutils literal notranslate"><span class="pre">CONFIG_PVH=y</span></code>.</p></li>
</ul>
</section>
<section id="id13">
<h2>Contributors<a class="headerlink" href="#id13" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.14.0 release including
some new faces.</p>
<p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a>
Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a>
Iggy Jackson <a class="reference external" href="mailto:iggy&#37;&#52;&#48;theiggy&#46;com">mailto:iggy<span>&#64;</span>theiggy<span>&#46;</span>com</a>
Jiachen Zhang <a class="reference external" href="mailto:zhangjiachen&#46;jaycee&#37;&#52;&#48;bytedance&#46;com">mailto:zhangjiachen<span>&#46;</span>jaycee<span>&#64;</span>bytedance<span>&#46;</span>com</a>
Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a>
Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a>
Penny Zheng <a class="reference external" href="mailto:Penny&#46;Zheng&#37;&#52;&#48;arm&#46;com">mailto:Penny<span>&#46;</span>Zheng<span>&#64;</span>arm<span>&#46;</span>com</a>
Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a>
Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a>
Vineeth Pillai <a class="reference external" href="mailto:viremana&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:viremana<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a>
Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a>
William Douglas <a class="reference external" href="mailto:william&#46;r&#46;douglas&#37;&#52;&#48;gmail&#46;com">mailto:william<span>&#46;</span>r<span>&#46;</span>douglas<span>&#64;</span>gmail<span>&#46;</span>com</a>
Zide Chen <a class="reference external" href="mailto:zide&#46;chen&#37;&#52;&#48;intel&#46;com">mailto:zide<span>&#46;</span>chen<span>&#64;</span>intel<span>&#46;</span>com</a></p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-13-0">
<h1>v0.13.0<a class="headerlink" href="#v0-13-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/16">0.13.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.13.0 include:</p>
<section id="wider-vfio-device-support">
<h2>Wider VFIO device support<a class="headerlink" href="#wider-vfio-device-support" title="Permalink to this headline"></a></h2>
<p>It is now possible to use Cloud Hypervisor’s VFIO support to passthrough PCI
devices that do not support MSI or MSI-X and instead rely on INTx interrupts.
Most notably this widens the support to most NVIDIA cards with the proprietary
drivers.</p>
</section>
<section id="improved-huge-page-support">
<h2>Improved huge page support<a class="headerlink" href="#improved-huge-page-support" title="Permalink to this headline"></a></h2>
<p>Through the addition of <code class="docutils literal notranslate"><span class="pre">hugepage_size</span></code> on <code class="docutils literal notranslate"><span class="pre">--memory</span></code> it is now possible to
specify the desired size of the huge pages used when allocating the guest
memory. The user is required to ensure they have sufficient pages of the
desired size in their pool.</p>
</section>
<section id="macvtap-support">
<h2>MACvTAP support<a class="headerlink" href="#macvtap-support" title="Permalink to this headline"></a></h2>
<p>It is now possible to provide file descriptors using the <code class="docutils literal notranslate"><span class="pre">fd</span></code> parameter to
<code class="docutils literal notranslate"><span class="pre">--net</span></code> which point at TAP devices that have already been opened by the user.
This aids integration with <code class="docutils literal notranslate"><span class="pre">libvirt</span></code> but also permits the use of MACvTAP
support. This is documented in dedicated <a class="reference internal" href="docs/macvtap-bridge.html"><span class="doc std std-doc">macvtap documentation</span></a>.</p>
</section>
<section id="vhd-disk-image-support">
<h2>VHD disk image support<a class="headerlink" href="#vhd-disk-image-support" title="Permalink to this headline"></a></h2>
<p>It is now possible to use VHD (fixed) disk images as well as QCOWv2 and raw
disk image with Cloud Hypervisor.</p>
</section>
<section id="improved-virtio-device-threading">
<h2>Improved Virtio device threading<a class="headerlink" href="#improved-virtio-device-threading" title="Permalink to this headline"></a></h2>
<p>Device threads are now derived from the main VMM thread which allows more
restrictive seccomp filters to be applied to them. The threads also have a
predictable name derived from the device id.</p>
</section>
<section id="clean-shutdown-support-via-synthetic-power-button">
<h2>Clean shutdown support via synthetic power button<a class="headerlink" href="#clean-shutdown-support-via-synthetic-power-button" title="Permalink to this headline"></a></h2>
<p>It is now possible to request that the guest VM shut itself down by triggering
a synthetic ACPI power button press from the VMM. If the guest is listening for
such an event (e.g. using systemd) then it will process the event and cleanly
shut down. This functionality is exposed through the HTTP API and can be
triggered via <code class="docutils literal notranslate"><span class="pre">ch-remote</span> <span class="pre">--api-socket=&lt;API</span> <span class="pre">socket&gt;</span> <span class="pre">power-button</span></code>.</p>
</section>
<section id="id14">
<h2>Contributors<a class="headerlink" href="#id14" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.13.0 release including
some new faces.</p>
<ul class="simple">
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Mikko Ylinen <a class="reference external" href="mailto:mikko&#46;ylinen&#37;&#52;&#48;intel&#46;com">mailto:mikko<span>&#46;</span>ylinen<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Vineeth Pillai <a class="reference external" href="mailto:viremana&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:viremana<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>William Douglas <a class="reference external" href="mailto:william&#46;r&#46;douglas&#37;&#52;&#48;gmail&#46;com">mailto:william<span>&#46;</span>r<span>&#46;</span>douglas<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Xie Yongji <a class="reference external" href="mailto:xieyongji&#37;&#52;&#48;bytedance&#46;com">mailto:xieyongji<span>&#64;</span>bytedance<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-12-0">
<h1>v0.12.0<a class="headerlink" href="#v0-12-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/15">0.12.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.12.0 include:</p>
<section id="arm64-enhancements">
<h2>ARM64 enhancements<a class="headerlink" href="#arm64-enhancements" title="Permalink to this headline"></a></h2>
<p>The use of <code class="docutils literal notranslate"><span class="pre">--watchdog</span></code> is now fully supported as is the ability to reboot the
VM from within the guest when running Cloud Hypervisor on an ARM64 system.</p>
</section>
<section id="removal-of-vhost-user-net-and-vhost-user-block-self-spawning">
<h2>Removal of <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> and <code class="docutils literal notranslate"><span class="pre">vhost-user-block</span></code> self spawning<a class="headerlink" href="#removal-of-vhost-user-net-and-vhost-user-block-self-spawning" title="Permalink to this headline"></a></h2>
<p>In order to use <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> or <code class="docutils literal notranslate"><span class="pre">vhost-user-block</span></code> backends the user is now
responsible for starting the backend and providing the socket for the VMM to
use. This functionality was deprecated in the last release and how now been
removed.</p>
</section>
<section id="migration-of-vhost-user-fs-backend">
<h2>Migration of <code class="docutils literal notranslate"><span class="pre">vhost-user-fs</span></code> backend<a class="headerlink" href="#migration-of-vhost-user-fs-backend" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">vhost-user-fs</span></code> backend is no longer included in Cloud Hypervisor and it is
instead hosted in <a class="reference external" href="https://gitlab.com/virtio-fs/virtiofsd-rs">it’s own
repository</a></p>
</section>
<section id="enhanced-info-api">
<h2>Enhanced “info” API<a class="headerlink" href="#enhanced-info-api" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">vm.info</span></code> HTTP API endpoint has been extended to include the details of the
devices used by the VM including any VFIO devices used.</p>
</section>
<section id="id15">
<h2>Contributors<a class="headerlink" href="#id15" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.12.0 release:</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Julio Montes <a class="reference external" href="mailto:julio&#46;montes&#37;&#52;&#48;intel&#46;com">mailto:julio<span>&#46;</span>montes<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-11-0">
<h1>v0.11.0<a class="headerlink" href="#v0-11-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/14">0.11.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.11.0 include:</p>
<section id="io-uring-support-by-default-for-virtio-block">
<h2><code class="docutils literal notranslate"><span class="pre">io_uring</span></code> support by default for <code class="docutils literal notranslate"><span class="pre">virtio-block</span></code><a class="headerlink" href="#io-uring-support-by-default-for-virtio-block" title="Permalink to this headline"></a></h2>
<p>Provided that the host OS supports it (Linux kernel 5.8+) then <code class="docutils literal notranslate"><span class="pre">io_uring</span></code> will
be used for a significantly higher performance block device.</p>
</section>
<section id="windows-guest-support">
<h2>Windows Guest Support<a class="headerlink" href="#windows-guest-support" title="Permalink to this headline"></a></h2>
<p>This is the first release where we officially support Windows running as a
guest. Full details of how to setup the image and run Cloud Hypervisor with a
Windows guest can be found in the dedicated <a class="reference internal" href="docs/windows.html"><span class="doc std std-doc">Windows
documentation</span></a>.</p>
</section>
<section id="vhost-user-self-spawning-deprecation">
<h2><code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> “Self Spawning” Deprecation<a class="headerlink" href="#vhost-user-self-spawning-deprecation" title="Permalink to this headline"></a></h2>
<p>Automatically spawning a <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> or <code class="docutils literal notranslate"><span class="pre">vhost-user-block</span></code> backend is now
deprecated. Users of this functionality will receive a warning and should make
adjustments. The functionality will be removed in the next release.</p>
</section>
<section id="virtio-mmio-removal">
<h2><code class="docutils literal notranslate"><span class="pre">virtio-mmio</span></code> Removal<a class="headerlink" href="#virtio-mmio-removal" title="Permalink to this headline"></a></h2>
<p>Support for using the <code class="docutils literal notranslate"><span class="pre">virtio-mmio</span></code> transport, rather than using PCI, has been
removed. This has been to simplify the code and significantly
reduce the testing burden of the project.</p>
</section>
<section id="snapshot-restore-support-for-arm64">
<h2>Snapshot/Restore support for ARM64<a class="headerlink" href="#snapshot-restore-support-for-arm64" title="Permalink to this headline"></a></h2>
<p>When running on the ARM64 architecture snapshot and restore has now been
implemented.</p>
</section>
<section id="improved-linux-boot-time">
<h2>Improved Linux Boot Time<a class="headerlink" href="#improved-linux-boot-time" title="Permalink to this headline"></a></h2>
<p>The time to boot the Linux kernel has been significantly improved by the
identifying some areas of delays around PCI bus probing, IOAPIC programming and
MPTABLE issues. Full details can be seen in #1728.</p>
</section>
<section id="sigterm-sigint-interrupt-signal-handling">
<h2><code class="docutils literal notranslate"><span class="pre">SIGTERM/SIGINT</span></code> Interrupt Signal Handling<a class="headerlink" href="#sigterm-sigint-interrupt-signal-handling" title="Permalink to this headline"></a></h2>
<p>When the VMM process receives the <code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code> or <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code> signals then it will
trigger the VMM process to cleanly deallocate resources before exiting. The
guest VM will not be cleanly shutdown but the VMM process will clean up its
resources.</p>
</section>
<section id="default-log-level-changed">
<h2>Default Log Level Changed<a class="headerlink" href="#default-log-level-changed" title="Permalink to this headline"></a></h2>
<p>The default logging level was changed to include warnings which should make it
easier to see potential issues. New <a class="reference internal" href="docs/logging.html"><span class="doc std std-doc">logging
documentation</span></a> was also added.</p>
</section>
<section id="new-balloon-parameter-added">
<h2>New <code class="docutils literal notranslate"><span class="pre">--balloon</span></code> Parameter Added<a class="headerlink" href="#new-balloon-parameter-added" title="Permalink to this headline"></a></h2>
<p>Control of the setup of <code class="docutils literal notranslate"><span class="pre">virtio-balloon</span></code> has been moved from <code class="docutils literal notranslate"><span class="pre">--memory</span></code> to its
own dedicated parameter. This makes it easier to add more balloon specific
controls without overloading <code class="docutils literal notranslate"><span class="pre">--memory</span></code>.</p>
</section>
<section id="experimental-virtio-watchdog-support">
<h2>Experimental <code class="docutils literal notranslate"><span class="pre">virtio-watchdog</span></code> Support<a class="headerlink" href="#experimental-virtio-watchdog-support" title="Permalink to this headline"></a></h2>
<p>Support for using a new <code class="docutils literal notranslate"><span class="pre">virtio-watchdog</span></code> has been added which can be used to
have the VMM reboot the guest if the guest userspace fails to ping the
watchdog. This is enabled with <code class="docutils literal notranslate"><span class="pre">--watchdog</span></code> and requires kernel support.</p>
</section>
<section id="id16">
<h2>Notable Bug Fixes<a class="headerlink" href="#id16" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>MTRR bit was missing from CPUID advertised to guest</p></li>
<li><p>“Return” key could not be used under <code class="docutils literal notranslate"><span class="pre">CMD.EXE</span></code> under Windows SAC (#1170)</p></li>
<li><p>CPU identification string is now exposed to the guest</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtio-pmem</span></code> with<code class="docutils literal notranslate"><span class="pre">discard_writes=on</span></code> no longer marks the guest memory as
read only so avoids excessive VM exits (#1795)</p></li>
<li><p>PCI device hotplug after an unplug was fixed (#1802)</p></li>
<li><p>When using the ACPI method to resize the guest memory the full reserved size
can be used (#1803)</p></li>
<li><p>Snapshot and restore followed by a second snapshot and restore now works
correctly</p></li>
<li><p>Snapshot and restore of VMs with more than 2GiB in one region now work
correctly</p></li>
</ul>
</section>
<section id="id17">
<h2>Contributors<a class="headerlink" href="#id17" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.11.0 release including some new faces.</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:anbelski&#37;&#52;&#48;linux&#46;microsoft&#46;com">mailto:anbelski<span>&#64;</span>linux<span>&#46;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Daniel Verkamp <a class="reference external" href="mailto:dverkamp&#37;&#52;&#48;chromium&#46;org">mailto:dverkamp<span>&#64;</span>chromium<span>&#46;</span>org</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Hui Zhu <a class="reference external" href="mailto:teawater&#37;&#52;&#48;antfin&#46;com">mailto:teawater<span>&#64;</span>antfin<span>&#46;</span>com</a></p></li>
<li><p>Jiangbo Wu <a class="reference external" href="mailto:jiangbo&#46;wu&#37;&#52;&#48;intel&#46;com">mailto:jiangbo<span>&#46;</span>wu<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Josh Soref <a class="reference external" href="mailto:jsoref&#37;&#52;&#48;users&#46;noreply&#46;github&#46;com">mailto:jsoref<span>&#64;</span>users<span>&#46;</span>noreply<span>&#46;</span>github<span>&#46;</span>com</a></p></li>
<li><p>Julio Montes <a class="reference external" href="mailto:julio&#46;montes&#37;&#52;&#48;intel&#46;com">mailto:julio<span>&#46;</span>montes<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>pierwill <a class="reference external" href="mailto:19642016+pierwill&#37;&#52;&#48;users&#46;noreply&#46;github&#46;com">mailto:19642016+pierwill<span>&#64;</span>users<span>&#46;</span>noreply<span>&#46;</span>github<span>&#46;</span>com</a></p></li>
<li><p>Praveen Paladugu <a class="reference external" href="mailto:prapal&#37;&#52;&#48;microsoft&#46;com">mailto:prapal<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-10-0">
<h1>v0.10.0<a class="headerlink" href="#v0-10-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/13">0.10.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.10.0 include:</p>
<section id="virtio-block-support-for-multiple-descriptors">
<h2><code class="docutils literal notranslate"><span class="pre">virtio-block</span></code> Support for Multiple Descriptors<a class="headerlink" href="#virtio-block-support-for-multiple-descriptors" title="Permalink to this headline"></a></h2>
<p>Some <code class="docutils literal notranslate"><span class="pre">virtio-block</span></code> device drivers may generate requests with multiple descriptors and support has been added for those drivers.</p>
</section>
<section id="memory-zones">
<h2>Memory Zones<a class="headerlink" href="#memory-zones" title="Permalink to this headline"></a></h2>
<p>Support has been added for fine grained control of memory allocation for the guest. This includes controlling the backing of sections of guest memory, assigning to specific host NUMA nodes and assigning memory and vCPUs to specific memory nodes inside the guest. Full details of this can be found in the <a class="reference internal" href="docs/memory.html"><span class="doc std std-doc">memory documentation</span></a>.</p>
</section>
<section id="seccomp-sandbox-improvements">
<h2><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> Sandbox Improvements<a class="headerlink" href="#seccomp-sandbox-improvements" title="Permalink to this headline"></a></h2>
<p>All the remaining threads and devices are now isolated within their own <code class="docutils literal notranslate"><span class="pre">seccomp</span></code> filters. This provides a layer of sandboxing and enhances the security model of <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code>.</p>
</section>
<section id="preliminary-kvm-hyperv-emulation-control">
<h2>Preliminary KVM HyperV Emulation Control<a class="headerlink" href="#preliminary-kvm-hyperv-emulation-control" title="Permalink to this headline"></a></h2>
<p>A new option (<code class="docutils literal notranslate"><span class="pre">kvm_hyperv</span></code>) has been added to <code class="docutils literal notranslate"><span class="pre">--cpus</span></code> to provide an option to toggle on KVM’s HyperV emulation support. This enables progress towards booting Windows without adding extra emulated devices.</p>
</section>
<section id="id18">
<h2>Notable Bug Fixes<a class="headerlink" href="#id18" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>When using <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code> to resize the VM parameter now accepts the standard sizes suffices (#1596)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> no longer panics when started with <code class="docutils literal notranslate"><span class="pre">--memory</span> <span class="pre">hotplug_method=virtio-mem</span></code> and no <code class="docutils literal notranslate"><span class="pre">hotplug_size</span></code> (#1564)</p></li>
<li><p>After a reboot memory can remove when using <code class="docutils literal notranslate"><span class="pre">--memory</span> <span class="pre">hotplug_method=virtio-mem</span></code> (#1593)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--version</span></code> shows the version for released binaries (#1669)</p></li>
<li><p>Errors generated by worker threads for <code class="docutils literal notranslate"><span class="pre">virtio</span></code> devices are now printed out (#1551)</p></li>
</ul>
</section>
<section id="id19">
<h2>Contributors<a class="headerlink" href="#id19" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.10.0 release including some new faces.</p>
<ul class="simple">
<li><p>Alyssa Ross <a class="reference external" href="mailto:hi&#37;&#52;&#48;alyssa&#46;is">mailto:hi<span>&#64;</span>alyssa<span>&#46;</span>is</a></p></li>
<li><p>Amey Narkhede <a class="reference external" href="mailto:ameynarkhede02&#37;&#52;&#48;gmail&#46;com">mailto:ameynarkhede02<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Anatol Belski <a class="reference external" href="mailto:ab&#37;&#52;&#48;php&#46;net">mailto:ab<span>&#64;</span>php<span>&#46;</span>net</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Hui Zhu <a class="reference external" href="mailto:teawater&#37;&#52;&#48;antfin&#46;com">mailto:teawater<span>&#64;</span>antfin<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-9-0">
<h1>v0.9.0<a class="headerlink" href="#v0-9-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/12">0.9.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.9.0 include:</p>
<section id="io-uring-based-block-device-support">
<h2><code class="docutils literal notranslate"><span class="pre">io_uring</span></code> Based Block Device Support<a class="headerlink" href="#io-uring-based-block-device-support" title="Permalink to this headline"></a></h2>
<p>If the <code class="docutils literal notranslate"><span class="pre">io_uring</span></code> feature is enabled and the host kernel supports it then <code class="docutils literal notranslate"><span class="pre">io_uring</span></code> will be used for block devices. This results a very significant performance improvement.</p>
</section>
<section id="block-and-network-device-statistics">
<h2>Block and Network Device Statistics<a class="headerlink" href="#block-and-network-device-statistics" title="Permalink to this headline"></a></h2>
<p>Statistics for activity of the <code class="docutils literal notranslate"><span class="pre">virtio</span></code> network and block devices is now exposed through a new <code class="docutils literal notranslate"><span class="pre">vm.counters</span></code> HTTP API entry point. These take the form of simple counters which can be used to observe the activity of the VM.</p>
</section>
<section id="http-api-responses">
<h2>HTTP API Responses<a class="headerlink" href="#http-api-responses" title="Permalink to this headline"></a></h2>
<p>The HTTP API for adding devices now responds with the name that was assigned to the device as well the PCI BDF.</p>
</section>
<section id="cpu-topology">
<h2>CPU Topology<a class="headerlink" href="#cpu-topology" title="Permalink to this headline"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">topology</span></code> parameter has been added to <code class="docutils literal notranslate"><span class="pre">--cpus</span></code> which allows the configuration of the guest CPU topology allowing the user to specify the numbers of sockets, packages per socket, cores per package and threads per core.</p>
</section>
<section id="release-build-optimization">
<h2>Release Build Optimization<a class="headerlink" href="#release-build-optimization" title="Permalink to this headline"></a></h2>
<p>Our release build is now built with LTO (<em>Link Time Optimization</em>) which results in a ~20% reduction in the binary size.</p>
</section>
<section id="hypervisor-abstraction">
<h2>Hypervisor Abstraction<a class="headerlink" href="#hypervisor-abstraction" title="Permalink to this headline"></a></h2>
<p>A new abstraction has been introduced, in the form of a <code class="docutils literal notranslate"><span class="pre">hypervisor</span></code> crate so as to enable the support of additional hypervisors beyond <code class="docutils literal notranslate"><span class="pre">KVM</span></code>.</p>
</section>
<section id="snapshot-restore-improvements">
<h2>Snapshot/Restore Improvements<a class="headerlink" href="#snapshot-restore-improvements" title="Permalink to this headline"></a></h2>
<p>Multiple improvements have been made to the VM snapshot/restore support that was added in the last release. This includes persisting more vCPU state and in particular preserving the guest paravirtualized clock in order to avoid vCPU hangs inside the guest when running with multiple vCPUs.</p>
</section>
<section id="virtio-memory-ballooning-support">
<h2>Virtio Memory Ballooning Support<a class="headerlink" href="#virtio-memory-ballooning-support" title="Permalink to this headline"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">virtio-balloon</span></code> device has been added, controlled through the <code class="docutils literal notranslate"><span class="pre">resize</span></code> control, which allows the reclamation of host memory by resizing a memory balloon inside the guest.</p>
</section>
<section id="enhancements-to-arm64-support">
<h2>Enhancements to ARM64 Support<a class="headerlink" href="#enhancements-to-arm64-support" title="Permalink to this headline"></a></h2>
<p>The ARM64 support introduced in the last release has been further enhanced with support for using PCI for exposing devices into the guest as well as multiple bug fixes. It also now supports using an initramfs when booting.</p>
</section>
<section id="intel-sgx-support">
<h2>Intel SGX Support<a class="headerlink" href="#intel-sgx-support" title="Permalink to this headline"></a></h2>
<p>The guest can now use Intel SGX if the host supports it. Details can be found in the dedicated <a class="reference internal" href="docs/intel_sgx.html"><span class="doc std std-doc">SGX documentation</span></a>.</p>
</section>
<section id="id20">
<h2><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> Sandbox Improvements<a class="headerlink" href="#id20" title="Permalink to this headline"></a></h2>
<p>The most frequently used virtio devices are now isolated with their own <code class="docutils literal notranslate"><span class="pre">seccomp</span></code> filters. It is also now possible to pass <code class="docutils literal notranslate"><span class="pre">--seccomp=log</span></code> which result in the logging of requests that would have otherwise been denied to further aid development.</p>
</section>
<section id="id21">
<h2>Notable Bug Fixes<a class="headerlink" href="#id21" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Our <code class="docutils literal notranslate"><span class="pre">virtio-vsock</span></code> implementation has been resynced with the implementation from Firecracker and includes multiple bug fixes.</p></li>
<li><p>CPU hotplug has been fixed so that it is now possible to add, remove, and re-add vCPUs (#1338)</p></li>
<li><p>A workaround is now in place for when KVM reports MSRs available MSRs that are in fact unreadable preventing snapshot/restore from working correctly (#1543).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virtio-mmio</span></code> based devices are now more widely tested (#275).</p></li>
<li><p>Multiple issues have been fixed with virtio device configuration (#1217)</p></li>
<li><p>Console input was wrongly consumed by both <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code> and the serial. (#1521)</p></li>
</ul>
</section>
<section id="id22">
<h2>Contributors<a class="headerlink" href="#id22" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.9.0 release including some new faces.</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:ab&#37;&#52;&#48;php&#46;net">mailto:ab<span>&#64;</span>php<span>&#46;</span>net</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Dr. David Alan Gilbert <a class="reference external" href="mailto:dgilbert&#37;&#52;&#48;redhat&#46;com">mailto:dgilbert<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Howard Zhang <a class="reference external" href="mailto:howard&#46;zhang&#37;&#52;&#48;arm&#46;com">mailto:howard<span>&#46;</span>zhang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Hui Zhu <a class="reference external" href="mailto:teawater&#37;&#52;&#48;antfin&#46;com">mailto:teawater<span>&#64;</span>antfin<span>&#46;</span>com</a></p></li>
<li><p>Jianyong Wu <a class="reference external" href="mailto:jianyong&#46;wu&#37;&#52;&#48;arm&#46;com">mailto:jianyong<span>&#46;</span>wu<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Jose Carlos Venegas Munoz <a class="reference external" href="mailto:jose&#46;carlos&#46;venegas&#46;munoz&#37;&#52;&#48;intel&#46;com">mailto:jose<span>&#46;</span>carlos<span>&#46;</span>venegas<span>&#46;</span>munoz<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>LiYa’nan <a class="reference external" href="mailto:oliverliyn&#37;&#52;&#48;gmail&#46;com">mailto:oliverliyn<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Praveen Paladugu <a class="reference external" href="mailto:prapal&#37;&#52;&#48;microsoft&#46;com">mailto:prapal<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Ricardo Koller <a class="reference external" href="mailto:ricarkol&#37;&#52;&#48;gmail&#46;com">mailto:ricarkol<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Stefano Garzarella <a class="reference external" href="mailto:sgarzare&#37;&#52;&#48;redhat&#46;com">mailto:sgarzare<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
<li><p>Wei Liu <a class="reference external" href="mailto:liuwe&#37;&#52;&#48;microsoft&#46;com">mailto:liuwe<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-8-0">
<h1>v0.8.0<a class="headerlink" href="#v0-8-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/10">0.8.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.8.0 include:</p>
<section id="experimental-snapshot-and-restore-support">
<h2>Experimental Snapshot and Restore Support<a class="headerlink" href="#experimental-snapshot-and-restore-support" title="Permalink to this headline"></a></h2>
<p>This release includes the first version of the snapshot and restore feature.
This allows a VM to be paused and then subsequently snapshotted. At a later
point that snapshot may be restored into a new running VM identical to the
original VM at the point it was paused.</p>
<p>This feature can be used for offline migration from one VM host to another, to
allow the upgrading or rebooting of the host machine transparently to the guest
or for templating the VM. This is an experimental feature and cannot be used on
a VM using passthrough (VFIO) devices. Issues with SMP have also been observed
(#1176).</p>
</section>
<section id="experimental-arm64-support">
<h2>Experimental ARM64 Support<a class="headerlink" href="#experimental-arm64-support" title="Permalink to this headline"></a></h2>
<p>Included in this release is experimental support for running on ARM64.
Currently only <code class="docutils literal notranslate"><span class="pre">virtio-mmio</span></code> devices and a serial port are supported. Full
details can be found in the <a class="reference internal" href="docs/arm64.html"><span class="doc std std-doc">ARM64 documentation</span></a>.</p>
</section>
<section id="support-for-using-5-level-paging-in-guests">
<h2>Support for Using 5-level Paging in Guests<a class="headerlink" href="#support-for-using-5-level-paging-in-guests" title="Permalink to this headline"></a></h2>
<p>If the host supports it the guest is now enabled for 5-level paging (aka LA57).
This works when booting the Linux kernel with a vmlinux, bzImage or firmware
based boot. However booting an ELF kernel built with <code class="docutils literal notranslate"><span class="pre">CONFIG_PVH=y</span></code> does not
work due to current limitations in the PVH boot process.</p>
</section>
<section id="virtio-device-interrupt-suppression-for-network-devices">
<h2>Virtio Device Interrupt Suppression for Network Devices<a class="headerlink" href="#virtio-device-interrupt-suppression-for-network-devices" title="Permalink to this headline"></a></h2>
<p>With <code class="docutils literal notranslate"><span class="pre">virtio-net</span></code> and <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> devices the guest can suppress
interrupts from the VMM by using the <code class="docutils literal notranslate"><span class="pre">VIRTIO_RING_F_EVENT_IDX</span></code> feature. This
can lead to an improvement in performance by reducing the number of interrupts
the guest must service.</p>
</section>
<section id="vhost-user-fs-improvements">
<h2><code class="docutils literal notranslate"><span class="pre">vhost_user_fs</span></code> Improvements<a class="headerlink" href="#vhost-user-fs-improvements" title="Permalink to this headline"></a></h2>
<p>The implementation in Cloud Hypervisor of the VirtioFS server now supports sandboxing itself with <code class="docutils literal notranslate"><span class="pre">seccomp</span></code>.</p>
</section>
<section id="id23">
<h2>Notable Bug Fixes<a class="headerlink" href="#id23" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>VMs that have not yet been booted can now be deleted (#1110).</p></li>
<li><p>By creating the <code class="docutils literal notranslate"><span class="pre">tap</span></code> device ahead of creating the VM it is not required to
run the <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> binary with <code class="docutils literal notranslate"><span class="pre">CAP_NET_ADMIN</span></code> (#1273).</p></li>
<li><p>Block I/O via <code class="docutils literal notranslate"><span class="pre">virtio-block</span></code> or <code class="docutils literal notranslate"><span class="pre">vhost-user-block</span></code> now correctly adheres to
the specification and synchronizes to the underlying filesystem as required
based on guest feature negotiation. This avoids potential data loss (#399,
#1216).</p></li>
<li><p>When booting with a large number of vCPUs then the ACPI table would be
overwritten by the SMP <code class="docutils literal notranslate"><span class="pre">MPTABLE</span></code>. When compiled with the <code class="docutils literal notranslate"><span class="pre">acpi</span></code> feature the
<code class="docutils literal notranslate"><span class="pre">MPTABLE</span></code> will no longer be generated (#1132).</p></li>
<li><p>Shutting down VMs that have been paused is now supported (#816).</p></li>
<li><p>Created socket files are deleted on shutdown (#1083).</p></li>
<li><p>Trying to use passthrough devices (VFIO) will be rejected on <code class="docutils literal notranslate"><span class="pre">mmio</span></code> builds
(#751).</p></li>
</ul>
</section>
<section id="command-line-and-api-changes">
<h2>Command Line and API Changes<a class="headerlink" href="#command-line-and-api-changes" title="Permalink to this headline"></a></h2>
<p>This is non exhaustive list of HTTP API and command line changes:</p>
<ul class="simple">
<li><p>All user visible socket parameters are now consistently called <code class="docutils literal notranslate"><span class="pre">socket</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">sock</span></code> in some cases.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code> tool now shows any error message generated by the VMM</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">wce</span></code> parameter has been removed from <code class="docutils literal notranslate"><span class="pre">--disk</span></code> as the feature is always
offered for negotiation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--net</span></code> has gained a <code class="docutils literal notranslate"><span class="pre">host_mac</span></code> option that allows the setting of the MAC
address for the <code class="docutils literal notranslate"><span class="pre">tap</span></code> device on the host.</p></li>
</ul>
</section>
<section id="id24">
<h2>Contributors<a class="headerlink" href="#id24" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.8.0 release including some new faces.</p>
<ul class="simple">
<li><p>Anatol Belski <a class="reference external" href="mailto:ab&#37;&#52;&#48;php&#46;net">mailto:ab<span>&#64;</span>php<span>&#46;</span>net</a></p></li>
<li><p>Arron Wang <a class="reference external" href="mailto:arron&#46;wang&#37;&#52;&#48;intel&#46;com">mailto:arron<span>&#46;</span>wang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Dr. David Alan Gilbert <a class="reference external" href="mailto:dgilbert&#37;&#52;&#48;redhat&#46;com">mailto:dgilbert<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
<li><p>Henry Wang <a class="reference external" href="mailto:Henry&#46;Wang&#37;&#52;&#48;arm&#46;com">mailto:Henry<span>&#46;</span>Wang<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Hui Zhu <a class="reference external" href="mailto:teawater&#37;&#52;&#48;antfin&#46;com">mailto:teawater<span>&#64;</span>antfin<span>&#46;</span>com</a></p></li>
<li><p>LiYa’nan <a class="reference external" href="mailto:oliverliyn&#37;&#52;&#48;gmail&#46;com">mailto:oliverliyn<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Michael Zhao <a class="reference external" href="mailto:michael&#46;zhao&#37;&#52;&#48;arm&#46;com">mailto:michael<span>&#46;</span>zhao<span>&#64;</span>arm<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sergio Lopez <a class="reference external" href="mailto:slp&#37;&#52;&#48;redhat&#46;com">mailto:slp<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-7-0">
<h1>v0.7.0<a class="headerlink" href="#v0-7-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/7">0.7.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.7.0 include:</p>
<section id="block-network-persistent-memory-pmem-virtiofs-and-vsock-hotplug">
<h2>Block, Network, Persistent Memory (PMEM), VirtioFS and Vsock hotplug<a class="headerlink" href="#block-network-persistent-memory-pmem-virtiofs-and-vsock-hotplug" title="Permalink to this headline"></a></h2>
<p>Further to our effort to support modifying a running guest we now support
hotplug and unplug of the following virtio backed devices: block, network,
pmem, virtio-fs and vsock. This functionality is available on the (default) PCI
based transport and is exposed through the HTTP API. The <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code> utility
provides a CLI for adding or removing these device types after the VM has
booted. User can use the <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter on the devices to choose names for
devices to ease their removal.</p>
</section>
<section id="alternative-libc-support">
<h2>Alternative <code class="docutils literal notranslate"><span class="pre">libc</span></code> Support<a class="headerlink" href="#alternative-libc-support" title="Permalink to this headline"></a></h2>
<p>Cloud Hypervisor can now be compiled with the <code class="docutils literal notranslate"><span class="pre">musl</span></code> C library and this release
contains a static binary compiled using that toolchain.</p>
</section>
<section id="multithreaded-multi-queued-vhost-user-backends">
<h2>Multithreaded Multi Queued <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> Backends<a class="headerlink" href="#multithreaded-multi-queued-vhost-user-backends" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> backends for network and block support that are shipped by
Cloud Hypervisor have been enhanced to support multiple threads and queues to
improve throughput. These backends are used automatically if <code class="docutils literal notranslate"><span class="pre">vhost_user=true</span></code>
is passed when the devices are created.</p>
</section>
<section id="initial-ramfs-support">
<h2>Initial RamFS Support<a class="headerlink" href="#initial-ramfs-support" title="Permalink to this headline"></a></h2>
<p>By passing the <code class="docutils literal notranslate"><span class="pre">--initramfs</span></code> command line option the user can specify a file to
be loaded into the guest memory to be used as the kernel initial filesystem.
This is usually used to allow the loading of drivers needed to be able to
access the real root filesystem but it can also be used standalone for a very
minimal image.</p>
</section>
<section id="alternative-memory-hotplug-virtio-mem">
<h2>Alternative Memory Hotplug: <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code><a class="headerlink" href="#alternative-memory-hotplug-virtio-mem" title="Permalink to this headline"></a></h2>
<p>As well as supporting ACPI based hotplug Cloud Hypervisor now supports using
the <code class="docutils literal notranslate"><span class="pre">virtio-mem</span></code> hotplug alternative. This can be controlled by the
<code class="docutils literal notranslate"><span class="pre">hotplug_method</span></code> parameter on the <code class="docutils literal notranslate"><span class="pre">--memory</span></code> command line option. It currently
requires kernel patches to be able to support it.</p>
</section>
<section id="seccomp-sandboxing">
<h2><code class="docutils literal notranslate"><span class="pre">Seccomp</span></code> Sandboxing<a class="headerlink" href="#seccomp-sandboxing" title="Permalink to this headline"></a></h2>
<p>Cloud Hypervisor now has support for restricting the system calls that the
process can use via the <code class="docutils literal notranslate"><span class="pre">seccomp</span></code> security API. This on by default and is
controlled by the <code class="docutils literal notranslate"><span class="pre">--seccomp</span></code> command line option.</p>
</section>
<section id="updated-distribution-support">
<h2>Updated Distribution Support<a class="headerlink" href="#updated-distribution-support" title="Permalink to this headline"></a></h2>
<p>With the release of Ubuntu 20.04 we have added that to the list of supported
distributions and is part of our regular testing programme.</p>
</section>
<section id="id25">
<h2>Command Line and API Changes<a class="headerlink" href="#id25" title="Permalink to this headline"></a></h2>
<p>This is non exhaustive list of HTTP API and command line changes</p>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">id</span></code> fields added for devices to allow them to be named to ease removal.
If no name is specified the VMM chooses one.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--memory</span></code>’s <code class="docutils literal notranslate"><span class="pre">shared</span></code> and <code class="docutils literal notranslate"><span class="pre">hugepages</span></code> controls for determining backing
memory instead of providing a path.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--vsock</span></code> parameter only takes one device as the Linux kernel only
supports a single Vsock device. The REST API has removed the vector for this
option and replaced it with a single optional field.</p></li>
<li><p>There is enhanced validation of the command line and API provided
configurations to ensure that the provided options are compatible e.g. that
shared memory is in use if any attempt is made to used a <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> backed
device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ch-remote</span></code> has added <code class="docutils literal notranslate"><span class="pre">add-disk</span></code>, <code class="docutils literal notranslate"><span class="pre">add-fs</span></code>, <code class="docutils literal notranslate"><span class="pre">add-net</span></code>, <code class="docutils literal notranslate"><span class="pre">add-pmem</span></code> and
<code class="docutils literal notranslate"><span class="pre">add-vsock</span></code> subcommands. For removal <code class="docutils literal notranslate"><span class="pre">remove-device</span></code> is used. The REST API
has appropriate new HTTP endpoints too.</p></li>
<li><p>Specifying a <code class="docutils literal notranslate"><span class="pre">size</span></code> with <code class="docutils literal notranslate"><span class="pre">--pmem</span></code> is no longer required and instead the size
will be obtained from the file. A <code class="docutils literal notranslate"><span class="pre">discard_writes</span></code> option has also been added
to provide the equivalent of a read-only file.</p></li>
<li><p>The parameters to <code class="docutils literal notranslate"><span class="pre">--block-backend</span></code> have been changed to more closely align
with those used by <code class="docutils literal notranslate"><span class="pre">--disk</span></code>.</p></li>
</ul>
</section>
<section id="id26">
<h2>Contributors<a class="headerlink" href="#id26" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone who has contributed to our 0.7.0 release including some new faces.</p>
<ul class="simple">
<li><p>Alejandro Jimenez <a class="reference external" href="mailto:alejandro&#46;j&#46;jimenez&#37;&#52;&#48;oracle&#46;com">mailto:alejandro<span>&#46;</span>j<span>&#46;</span>jimenez<span>&#64;</span>oracle<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Cathy Zhang <a class="reference external" href="mailto:cathy&#46;zhang&#37;&#52;&#48;intel&#46;com">mailto:cathy<span>&#46;</span>zhang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Damjan Georgievski <a class="reference external" href="mailto:gdamjan&#37;&#52;&#48;gmail&#46;com">mailto:gdamjan<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Dean Sheather <a class="reference external" href="mailto:dean&#37;&#52;&#48;coder&#46;com">mailto:dean<span>&#64;</span>coder<span>&#46;</span>com</a></p></li>
<li><p>Eryu Guan <a class="reference external" href="mailto:eguan&#37;&#52;&#48;linux&#46;alibaba&#46;com">mailto:eguan<span>&#64;</span>linux<span>&#46;</span>alibaba<span>&#46;</span>com</a></p></li>
<li><p>Hui Zhu <a class="reference external" href="mailto:teawater&#37;&#52;&#48;antfin&#46;com">mailto:teawater<span>&#64;</span>antfin<span>&#46;</span>com</a></p></li>
<li><p>Jose Carlos Venegas Munoz <a class="reference external" href="mailto:jose&#46;carlos&#46;venegas&#46;munoz&#37;&#52;&#48;intel&#46;com">mailto:jose<span>&#46;</span>carlos<span>&#46;</span>venegas<span>&#46;</span>munoz<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Martin Xu <a class="reference external" href="mailto:martin&#46;xu&#37;&#52;&#48;intel&#46;com">mailto:martin<span>&#46;</span>xu<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Muminul Islam <a class="reference external" href="mailto:muislam&#37;&#52;&#48;microsoft&#46;com">mailto:muislam<span>&#64;</span>microsoft<span>&#46;</span>com</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sergio Lopez <a class="reference external" href="mailto:slp&#37;&#52;&#48;redhat&#46;com">mailto:slp<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
<li><p>Yang Zhong <a class="reference external" href="mailto:yang&#46;zhong&#37;&#52;&#48;intel&#46;com">mailto:yang<span>&#46;</span>zhong<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Yi Sun <a class="reference external" href="mailto:yi&#46;y&#46;sun&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:yi<span>&#46;</span>y<span>&#46;</span>sun<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-6-0">
<h1>v0.6.0<a class="headerlink" href="#v0-6-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/7">0.6.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.6.0 include:</p>
<section id="directly-assigned-devices-hotplug">
<h2>Directly Assigned Devices Hotplug<a class="headerlink" href="#directly-assigned-devices-hotplug" title="Permalink to this headline"></a></h2>
<p>We continued our efforts around supporting dynamically changing the guest
resources. After adding support for CPU and memory hotplug, Cloud Hypervisor
now supports hot plugging and hot unplugging directly assigned (a.k.a. <code class="docutils literal notranslate"><span class="pre">VFIO</span></code>)
devices into an already running guest. This closes the features gap for
providing a complete Kata Containers workloads support with Cloud Hypervisor.</p>
</section>
<section id="shared-filesystem-improvements">
<h2>Shared Filesystem Improvements<a class="headerlink" href="#shared-filesystem-improvements" title="Permalink to this headline"></a></h2>
<p>We enhanced our shared filesystem support through many <code class="docutils literal notranslate"><span class="pre">virtio-fs</span></code> improvements.
By adding support for DAX, parallel processing of multiple requests, <code class="docutils literal notranslate"><span class="pre">FS_IO</span></code>,
<code class="docutils literal notranslate"><span class="pre">LSEEK</span></code> and the <code class="docutils literal notranslate"><span class="pre">MMIO</span></code> virtio transport layer to our <code class="docutils literal notranslate"><span class="pre">vhost_user_fs</span></code> daemon, we
improved our filesystem sharing performance, but also made it more stable and
compatible with other <code class="docutils literal notranslate"><span class="pre">virtio-fs</span></code> implementations.</p>
</section>
<section id="block-and-networking-io-self-offloading">
<h2>Block and Networking IO Self Offloading<a class="headerlink" href="#block-and-networking-io-self-offloading" title="Permalink to this headline"></a></h2>
<p>When choosing to offload the paravirtualized block and networking I/O to an
external process (through the <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> protocol), Cloud Hypervisor now
automatically spawns its default <code class="docutils literal notranslate"><span class="pre">vhost-user-blk</span></code> and <code class="docutils literal notranslate"><span class="pre">vhost-user-net</span></code> backends
into their own, separate processes.
This provides a seamless paravirtualized I/O user experience for those who want
to run their guest I/O into separate executions contexts.</p>
</section>
<section id="command-line-interface">
<h2>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline"></a></h2>
<p>More and more Cloud Hypervisor services are exposed through the
<span class="xref myst">Rest API</span> and thus only
accessible via relatively cumbersome HTTP calls. In order to abstract
those calls into a more user friendly tool, we created a Cloud Hypervisor
Command Line Interface (CLI) called <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code>.  The <code class="docutils literal notranslate"><span class="pre">ch-remote</span></code> binary
is created with each build and available e.g. at
<code class="docutils literal notranslate"><span class="pre">cloud-hypervisor/target/debug/ch-remote</span></code> when doing a debug build.</p>
<p>Please check <code class="docutils literal notranslate"><span class="pre">ch-remote</span> <span class="pre">--help</span></code> for a complete description of all available
commands.</p>
</section>
<section id="pvh-boot">
<h2>PVH Boot<a class="headerlink" href="#pvh-boot" title="Permalink to this headline"></a></h2>
<p>In addition to the traditional Linux boot protocol, Cloud Hypervisor now
supports direct kernel booting through the <a class="reference external" href="https://xenbits.xen.org/docs/unstable/misc/pvh.html">PVH ABI</a>.</p>
</section>
<section id="id27">
<h2>Contributors<a class="headerlink" href="#id27" title="Permalink to this headline"></a></h2>
<p>With the 0.6.0 release, we are welcoming a few new contributors. Many thanks
to them and to everyone that contributed to this release:</p>
<ul class="simple">
<li><p>Alejandro Jimenez <a class="reference external" href="mailto:alejandro&#46;j&#46;jimenez&#37;&#52;&#48;oracle&#46;com">mailto:alejandro<span>&#46;</span>j<span>&#46;</span>jimenez<span>&#64;</span>oracle<span>&#46;</span>com</a></p></li>
<li><p>Arron Wang <a class="reference external" href="mailto:arron&#46;wang&#37;&#52;&#48;intel&#46;com">mailto:arron<span>&#46;</span>wang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Bin Liu <a class="reference external" href="mailto:liubin0329&#37;&#52;&#48;gmail&#46;com">mailto:liubin0329<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Cathy Zhang <a class="reference external" href="mailto:cathy&#46;zhang&#37;&#52;&#48;intel&#46;com">mailto:cathy<span>&#46;</span>zhang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Eryu Guan <a class="reference external" href="mailto:eguan&#37;&#52;&#48;linux&#46;alibaba&#46;com">mailto:eguan<span>&#64;</span>linux<span>&#46;</span>alibaba<span>&#46;</span>com</a></p></li>
<li><p>Jose Carlos Venegas Munoz <a class="reference external" href="mailto:jose&#46;carlos&#46;venegas&#46;munoz&#37;&#52;&#48;intel&#46;com">mailto:jose<span>&#46;</span>carlos<span>&#46;</span>venegas<span>&#46;</span>munoz<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Liu Bo <a class="reference external" href="mailto:bo&#46;liu&#37;&#52;&#48;linux&#46;alibaba&#46;com">mailto:bo<span>&#46;</span>liu<span>&#64;</span>linux<span>&#46;</span>alibaba<span>&#46;</span>com</a></p></li>
<li><p>Qiu Wenbo <a class="reference external" href="mailto:qiuwenbo&#37;&#52;&#48;phytium&#46;com&#46;cn">mailto:qiuwenbo<span>&#64;</span>phytium<span>&#46;</span>com<span>&#46;</span>cn</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sergio Lopez <a class="reference external" href="mailto:slp&#37;&#52;&#48;redhat&#46;com">mailto:slp<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-5-1">
<h1>v0.5.1<a class="headerlink" href="#v0-5-1" title="Permalink to this headline"></a></h1>
<p>This is a bugfix release branched off v0.5.0. It contains the following fixes:</p>
<ul class="simple">
<li><p>Update DiskConfig to contain missing disk control features (#790) - Samuel Ortiz and Sergio Lopez</p></li>
<li><p>Prevent memory overcommit via virtio-fs (#763) - Sebastien Boeuf</p></li>
<li><p>Fixed error reporting for resize command - Samuel Ortiz</p></li>
<li><p>Double reboot workaround (#783) - Rob Bradford</p></li>
<li><p>Various CI and development tooling fixes - Sebastien Boeuf, Samuel Ortiz, Rob Bradford</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-5-0">
<h1>v0.5.0<a class="headerlink" href="#v0-5-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/6">0.5.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.5.0 include:</p>
<section id="virtual-machine-dynamic-resizing">
<h2>Virtual Machine Dynamic Resizing<a class="headerlink" href="#virtual-machine-dynamic-resizing" title="Permalink to this headline"></a></h2>
<p>With 0.4.0 we added support for CPU hot plug, and 0.5.0 adds CPU hot unplug and
memory hot plug as well. This allows to dynamically resize Cloud Hypervisor
guests which is needed for e.g. Kubernetes related use cases.
The memory hot plug implementation is based on the same framework as the CPU hot
plug/unplug one, i.e. hardware-reduced ACPI notifications to the guest.</p>
<p>Next on our VM resizing roadmap is the PCI devices hotplug feature.</p>
</section>
<section id="multi-queue-multi-threaded-paravirtualization">
<h2>Multi-Queue, Multi-Threaded Paravirtualization<a class="headerlink" href="#multi-queue-multi-threaded-paravirtualization" title="Permalink to this headline"></a></h2>
<p>We enhanced our virtio networking and block support by having both devices use
multiple I/O queues handled by multiple threads. This improves our default
paravirtualized networking and block devices throughput.</p>
</section>
<section id="new-interrupt-management-framework">
<h2>New Interrupt Management Framework<a class="headerlink" href="#new-interrupt-management-framework" title="Permalink to this headline"></a></h2>
<p>We improved our interrupt management implementation by introducing an Interrupt
Manager framework, based on the currently on-going <a class="reference external" href="https://github.com/rust-vmm/vm-device">rust-vmm vm-device</a>
crates discussions. This move made the code significantly cleaner, and allowed
us to remove several KVM related dependencies from crates like the PCI and
virtio ones.</p>
</section>
<section id="development-tools">
<h2>Development Tools<a class="headerlink" href="#development-tools" title="Permalink to this headline"></a></h2>
<p>In order to provide a better developer experience, we worked on improving our
build, development and testing tools.
Somehow similar to the excellent
<a class="reference external" href="https://github.com/firecracker-microvm/firecracker/blob/master/tools/devtool">Firecracker’s devtool</a>,
we now provide a <span class="xref myst">dev_cli script</span>.</p>
<p>With this new tool, our users and contributors will be able to build and test
Cloud Hypervisor through a containerized environment.</p>
</section>
<section id="kata-containers-integration">
<h2>Kata Containers Integration<a class="headerlink" href="#kata-containers-integration" title="Permalink to this headline"></a></h2>
<p>We spent some significant time and efforts debugging and fixing our integration
with the <a class="reference external" href="https://github.com/kata-containers">Kata Containers</a> project. Cloud
Hypervisor is now a fully supported Kata Containers hypervisor, and is
integrated into the project’s CI.</p>
</section>
<section id="id28">
<h2>Contributors<a class="headerlink" href="#id28" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone that contributed to the 0.5.0 release:</p>
<ul class="simple">
<li><p>Bo Chen <a class="reference external" href="mailto:chen&#46;bo&#37;&#52;&#48;intel&#46;com">mailto:chen<span>&#46;</span>bo<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Cathy Zhang <a class="reference external" href="mailto:cathy&#46;zhang&#37;&#52;&#48;intel&#46;com">mailto:cathy<span>&#46;</span>zhang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Qiu Wenbo <a class="reference external" href="mailto:qiuwenbo&#37;&#52;&#48;phytium&#46;com&#46;cn">mailto:qiuwenbo<span>&#64;</span>phytium<span>&#46;</span>com<span>&#46;</span>cn</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sergio Lopez <a class="reference external" href="mailto:slp&#37;&#52;&#48;redhat&#46;com">mailto:slp<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
<li><p>Yang Zhong <a class="reference external" href="mailto:yang&#46;zhong&#37;&#52;&#48;intel&#46;com">mailto:yang<span>&#46;</span>zhong<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-4-0">
<h1>v0.4.0<a class="headerlink" href="#v0-4-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/4">0.4.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.4.0 include:</p>
<section id="dynamic-virtual-cpus-addition">
<h2>Dynamic virtual CPUs addition<a class="headerlink" href="#dynamic-virtual-cpus-addition" title="Permalink to this headline"></a></h2>
<p>As a way to vertically scale Cloud Hypervisor guests, we now support dynamically
adding virtual CPUs to the guests, a mechanism also known as CPU hot plug.
Through hardware-reduced ACPI notifications, Cloud Hypervisor can now add CPUs
to an already running guest and the high level operations for that process are
documented <a class="reference internal" href="docs/hotplug.html"><span class="doc std std-doc">here</span></a></p>
<p>During the next release cycles we are planning to extend Cloud Hypervisor
hot plug framework to other resources, namely PCI devices and memory.</p>
</section>
<section id="programmatic-firmware-tables-generation">
<h2>Programmatic firmware tables generation<a class="headerlink" href="#programmatic-firmware-tables-generation" title="Permalink to this headline"></a></h2>
<p>As part of the CPU hot plug feature enablement, and as a requirement for hot
plugging other resources like devices or RAM, we added support for
programmatically generating the needed ACPI tables. Through a dedicated
<code class="docutils literal notranslate"><span class="pre">acpi-tables</span></code> crate, we now have a flexible and clean way of generating those
tables based on the VMM device model and topology.</p>
</section>
<section id="filesystem-and-block-devices-vhost-user-backends">
<h2>Filesystem and block devices vhost-user backends<a class="headerlink" href="#filesystem-and-block-devices-vhost-user-backends" title="Permalink to this headline"></a></h2>
<p>Our objective of running all Cloud Hypervisor paravirtualized I/O to a
vhost-user based framework is getting closer as we’ve added Rust based
implementations for vhost-user-blk and virtiofs backends. Together with the
vhost-user-net backend that came with the 0.3.0 release, this will form the
default Cloud Hypervisor I/O architecture.</p>
</section>
<section id="guest-pause-and-resume">
<h2>Guest pause and resume<a class="headerlink" href="#guest-pause-and-resume" title="Permalink to this headline"></a></h2>
<p>As an initial requirement for enabling live migration, we added support for
pausing and resuming any VMM components. As an intermediate step towards live
migration, the upcoming guest snapshotting feature will be based on the pause
and resume capabilities.</p>
</section>
<section id="userspace-ioapic-by-default">
<h2>Userspace IOAPIC by default<a class="headerlink" href="#userspace-ioapic-by-default" title="Permalink to this headline"></a></h2>
<p>As a way to simplify our device manager implementation, but also in order to
stay away from privileged rings as often as possible, any device that relies on
pin based interrupts will be using the userspace IOAPIC implementation by
default.</p>
</section>
<section id="pci-bar-reprogramming">
<h2>PCI BAR reprogramming<a class="headerlink" href="#pci-bar-reprogramming" title="Permalink to this headline"></a></h2>
<p>In order to allow for a more flexible device model, and also support guests
that would want to move PCI devices, we added support for PCI devices BAR
reprogramming.</p>
</section>
<section id="new-cloud-hypervisor-organization">
<h2>New <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> organization<a class="headerlink" href="#new-cloud-hypervisor-organization" title="Permalink to this headline"></a></h2>
<p>As we wanted to be more flexible on how we manage the Cloud Hypervisor project,
we decided to move it under a <a class="reference external" href="https://github.com/cloud-hypervisor">dedicated GitHub organization</a>.
Together with the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor">cloud-hypervisor</a>
project, this new organization also now hosts our <a class="reference external" href="https://github.com/cloud-hypervisor/linux">kernel</a>
and <a class="reference external" href="https://github.com/cloud-hypervisor/rust-hypervisor-firmware">firmware</a>
repositories. We may also use it to host any rust-vmm that we’d need to
temporarily fork.
Thanks to GitHub’s seamless repository redirections, the move is completely
transparent to all Cloud Hypervisor contributors, users and followers.</p>
</section>
<section id="id29">
<h2>Contributors<a class="headerlink" href="#id29" title="Permalink to this headline"></a></h2>
<p>Many thanks to everyone that contributed to the 0.4.0 release:</p>
<ul class="simple">
<li><p>Cathy Zhang <a class="reference external" href="mailto:cathy&#46;zhang&#37;&#52;&#48;intel&#46;com">mailto:cathy<span>&#46;</span>zhang<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Emin Ghuliev <a class="reference external" href="mailto:drmint80&#37;&#52;&#48;gmail&#46;com">mailto:drmint80<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
<li><p>Jose Carlos Venegas Munoz <a class="reference external" href="mailto:jose&#46;carlos&#46;venegas&#46;munoz&#37;&#52;&#48;intel&#46;com">mailto:jose<span>&#46;</span>carlos<span>&#46;</span>venegas<span>&#46;</span>munoz<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Qiu Wenbo <a class="reference external" href="mailto:qiuwenbo&#37;&#52;&#48;phytium&#46;com&#46;cn">mailto:qiuwenbo<span>&#64;</span>phytium<span>&#46;</span>com<span>&#46;</span>cn</a></p></li>
<li><p>Rob Bradford <a class="reference external" href="mailto:robert&#46;bradford&#37;&#52;&#48;intel&#46;com">mailto:robert<span>&#46;</span>bradford<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Samuel Ortiz <a class="reference external" href="mailto:sameo&#37;&#52;&#48;linux&#46;intel&#46;com">mailto:sameo<span>&#64;</span>linux<span>&#46;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sebastien Boeuf <a class="reference external" href="mailto:sebastien&#46;boeuf&#37;&#52;&#48;intel&#46;com">mailto:sebastien<span>&#46;</span>boeuf<span>&#64;</span>intel<span>&#46;</span>com</a></p></li>
<li><p>Sergio Lopez <a class="reference external" href="mailto:slp&#37;&#52;&#48;redhat&#46;com">mailto:slp<span>&#64;</span>redhat<span>&#46;</span>com</a></p></li>
<li><p>Wu Zongyong <a class="reference external" href="mailto:wuzongyong&#37;&#52;&#48;linux&#46;alibaba&#46;com">mailto:wuzongyong<span>&#64;</span>linux<span>&#46;</span>alibaba<span>&#46;</span>com</a></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-3-0">
<h1>v0.3.0<a class="headerlink" href="#v0-3-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/3">0.3.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.3.0 include:</p>
<section id="block-device-offloading">
<h2>Block device offloading<a class="headerlink" href="#block-device-offloading" title="Permalink to this headline"></a></h2>
<p>We continue to work on offloading paravirtualized I/O to external processes,
and we added support for
<a class="reference external" href="https://access.redhat.com/solutions/3394851">vhost-user-blk</a> backends.
This enables <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> users to plug a <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> based block device
like <a class="reference external" href="https://spdk.io">SPDK</a>) into the VMM as their paravirtualized storage
backend.</p>
</section>
<section id="network-device-backend">
<h2>Network device backend<a class="headerlink" href="#network-device-backend" title="Permalink to this headline"></a></h2>
<p>The previous release provided support for
<a class="reference external" href="https://access.redhat.com/solutions/3394851">vhost-user-net</a> backends. Now we
also provide a TAP based vhost-user-net backend, implemented in Rust. Together
with the vhost-user-net device implementation, this will eventually become the
Cloud Hypervisor default paravirtualized networking architecture.</p>
</section>
<section id="virtual-sockets">
<h2>Virtual sockets<a class="headerlink" href="#virtual-sockets" title="Permalink to this headline"></a></h2>
<p>In order to more efficiently and securely communicate between host and guest,
we added an hybrid implementation of the
<a class="reference external" href="http://man7.org/linux/man-pages/man7/vsock.7.html">VSOCK</a> socket address
family over virtio. Credits go to the
<a class="reference external" href="https://github.com/firecracker-microvm/firecracker/blob/master/docs/vsock.md">Firecracker</a>
project as our implementation is a copy of theirs.</p>
</section>
<section id="http-based-api">
<h2>HTTP based API<a class="headerlink" href="#http-based-api" title="Permalink to this headline"></a></h2>
<p>In anticipation of the need to support asynchronous operations to Cloud
Hypervisor guests (e.g. resources hotplug and guest migration), we added a HTTP
based API to the VMM. The API will be more extensively documented during the
next release cycle.</p>
</section>
<section id="memory-mapped-virtio-transport">
<h2>Memory mapped virtio transport<a class="headerlink" href="#memory-mapped-virtio-transport" title="Permalink to this headline"></a></h2>
<p>In order to support potential PCI-free use cases, we added support for the
<a class="reference external" href="https://docs.oasis-open.org/virtio/virtio/v1.1/cs01/virtio-v1.1-cs01.html#x1-1440002">virtio MMIO</a>
transport layer. This will allow us to support simple, minimal guest
configurations that do not require a PCI bus emulation.</p>
</section>
<section id="paravirtualized-iommu">
<h2>Paravirtualized IOMMU<a class="headerlink" href="#paravirtualized-iommu" title="Permalink to this headline"></a></h2>
<p>As we want to improve our nested guests support, we added support for exposing
a <a class="reference internal" href="docs/iommu.html"><span class="doc std std-doc">paravirtualized IOMMU</span></a> device through virtio. This allows
for a safer nested virtio and directly assigned devices support.</p>
<p>To add the IOMMU support, we had to make some CLI changes for Cloud Hypervisor
users to be able to specify if devices had to be handled through this virtual
IOMMU or not. In particular, the <code class="docutils literal notranslate"><span class="pre">--disk</span></code> option now expects disk paths to be
prefixed with a <code class="docutils literal notranslate"><span class="pre">path=</span></code> string, and supports an optional <code class="docutils literal notranslate"><span class="pre">iommu=[on|off]</span></code>
setting.</p>
</section>
<section id="ubuntu-19-10">
<h2>Ubuntu 19.10<a class="headerlink" href="#ubuntu-19-10" title="Permalink to this headline"></a></h2>
<p>With the latest <a class="reference external" href="https://github.com/cloud-hypervisor/rust-hypervisor-firmware">hypervisor firmware</a>,
we can now support the latest
<a class="reference external" href="http://releases.ubuntu.com/19.10/">Ubuntu 19.10 (Eoan Ermine)</a> cloud images.</p>
</section>
<section id="large-memory-guests">
<h2>Large memory guests<a class="headerlink" href="#large-memory-guests" title="Permalink to this headline"></a></h2>
<p>After simplifying and changing our guest address space handling, we can now
support guests with large amount of memory (more than 64GB).</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-2-0">
<h1>v0.2.0<a class="headerlink" href="#v0-2-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/2">0.2.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.2.0 include:</p>
<section id="network-device-offloading">
<h2>Network device offloading<a class="headerlink" href="#network-device-offloading" title="Permalink to this headline"></a></h2>
<p>As part of our general effort to offload paravirtualized I/O to external
processes, we added support for
<a class="reference external" href="https://access.redhat.com/solutions/3394851">vhost-user-net</a> backends. This
enables <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> users to plug a <code class="docutils literal notranslate"><span class="pre">vhost-user</span></code> based networking device
(e.g. <a class="reference external" href="https://dpdk.org">DPDK</a>) into the VMM as their virtio network backend.</p>
</section>
<section id="minimal-hardware-reduced-acpi">
<h2>Minimal hardware-reduced ACPI<a class="headerlink" href="#minimal-hardware-reduced-acpi" title="Permalink to this headline"></a></h2>
<p>In order to properly implement and guest reset and shutdown, we implemented
a minimal version of the hardware-reduced ACPI specification. Together with
a tiny I/O port based ACPI device, this allows <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> guests to
cleanly reboot and shutdown.</p>
<p>The ACPI implementation is a <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> build time option that is
enabled by default.</p>
</section>
<section id="debug-i-o-port">
<h2>Debug I/O port<a class="headerlink" href="#debug-i-o-port" title="Permalink to this headline"></a></h2>
<p>Based on the Firecracker idea of using a dedicated I/O port to measure guest
boot times, we added support for logging guest events through the
<a class="reference external" href="https://www.intel.com/content/www/us/en/support/articles/000005500/boards-and-kits.html">0x80</a>
PC debug port. This allows, among other things, for granular guest boot time
measurements. See our <a class="reference internal" href="docs/debug-port.html"><span class="doc std std-doc">debug port documentation</span></a> for more
details.</p>
</section>
<section id="improved-direct-device-assignment">
<h2>Improved direct device assignment<a class="headerlink" href="#improved-direct-device-assignment" title="Permalink to this headline"></a></h2>
<p>We fixed a major performance issue with our initial VFIO implementation: When
enabling VT-d through the KVM and VFIO APIs, our guest memory writes and reads
were (in many cases) not cached. After correctly tagging the guest memory from
<code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> we’re now able to reach the expected performance from
directly assigned devices.</p>
</section>
<section id="improved-shared-filesystem">
<h2>Improved shared filesystem<a class="headerlink" href="#improved-shared-filesystem" title="Permalink to this headline"></a></h2>
<p>We added shared memory region with <a class="reference external" href="https://www.kernel.org/doc/Documentation/filesystems/dax.txt">DAX</a>
support to our <a class="reference external" href="https://virtio-fs.gitlab.io/">virtio-fs</a> shared file system.
This provides better shared filesystem IO performance with a smaller guest
memory footprint.</p>
</section>
<section id="ubuntu-bionic-based-ci">
<h2>Ubuntu bionic based CI<a class="headerlink" href="#ubuntu-bionic-based-ci" title="Permalink to this headline"></a></h2>
<p>Thanks to our <a class="reference external" href="https://github.com/cloud-hypervisor/rust-hypervisor-firmware">simple KVM firmware</a>
improvements, we are now able to boot Ubuntu bionic images. We added those to
our CI pipeline.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="v0-1-0">
<h1>v0.1.0<a class="headerlink" href="#v0-1-0" title="Permalink to this headline"></a></h1>
<p>This release has been tracked through the <a class="reference external" href="https://github.com/cloud-hypervisor/cloud-hypervisor/projects/1">0.1.0 project</a>.</p>
<p>Highlights for <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> version 0.1.0 include:</p>
<section id="shared-filesystem">
<h2>Shared filesystem<a class="headerlink" href="#shared-filesystem" title="Permalink to this headline"></a></h2>
<p>We added support for the <a class="reference external" href="https://virtio-fs.gitlab.io/">virtio-fs</a> shared file
system, allowing for an efficient and reliable way of sharing a filesystem
between the host and the <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> guest.</p>
<p>See our <a class="reference internal" href="docs/fs.html"><span class="doc std std-doc">filesystem sharing</span></a> documentation for more details on how
to use virtio-fs with <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code>.</p>
</section>
<section id="initial-direct-device-assignment-support">
<h2>Initial direct device assignment support<a class="headerlink" href="#initial-direct-device-assignment-support" title="Permalink to this headline"></a></h2>
<p>VFIO (Virtual Function I/O) is a kernel framework that exposes direct device
access to userspace. <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> uses VFIO to directly assign host
physical devices into its guest.</p>
<p>See our <a class="reference internal" href="docs/vfio.html"><span class="doc std std-doc">VFIO</span></a> documentation for more detail on how to directly
assign host devices to <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> guests.</p>
</section>
<section id="userspace-ioapic">
<h2>Userspace IOAPIC<a class="headerlink" href="#userspace-ioapic" title="Permalink to this headline"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> supports a so-called split IRQ chip implementation by
implementing support for the <a class="reference external" href="https://wiki.osdev.org/IOAPIC">IOAPIC</a>.
By moving part of the IRQ chip implementation from kernel space to user space,
the IRQ chip emulation does not always run in a fully privileged mode.</p>
</section>
<section id="virtual-persistent-memory">
<h2>Virtual persistent memory<a class="headerlink" href="#virtual-persistent-memory" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">virtio-pmem</span></code> implementation emulates a virtual persistent memory device
that <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> can e.g. boot from. Booting from a <code class="docutils literal notranslate"><span class="pre">virtio-pmem</span></code> device
allows to bypass the guest page cache and improve the guest memory footprint.</p>
</section>
<section id="linux-kernel-bzimage">
<h2>Linux kernel bzImage<a class="headerlink" href="#linux-kernel-bzimage" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> linux kernel loader now supports direct kernel boot from
<code class="docutils literal notranslate"><span class="pre">bzImage</span></code> kernel images, which is usually the format that Linux distributions
use to ship their kernels. For example, this allows for booting from the host
distribution kernel image.</p>
</section>
<section id="console-over-virtio">
<h2>Console over virtio<a class="headerlink" href="#console-over-virtio" title="Permalink to this headline"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">cloud-hypervisor</span></code> now exposes a <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code> device to the guest. Although
using this device as a guest console can potentially cut some early boot
messages, it can reduce the guest boot time and provides a complete console
implementation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">virtio-console</span></code> device is enabled by default for the guest console.
Switching back to the legacy serial port is done by selecting
<code class="docutils literal notranslate"><span class="pre">--serial</span> <span class="pre">tty</span> <span class="pre">--console</span> <span class="pre">off</span></code> from the command line.</p>
</section>
<section id="unit-testing">
<h2>Unit testing<a class="headerlink" href="#unit-testing" title="Permalink to this headline"></a></h2>
<p>We now run all unit tests from all our crates directly from our CI.</p>
</section>
<section id="integration-tests-parallelization">
<h2>Integration tests parallelization<a class="headerlink" href="#integration-tests-parallelization" title="Permalink to this headline"></a></h2>
<p>The CI cycle run time has been significantly reduced by refactoring our
integration tests; allowing them to all be run in parallel.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, various.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>